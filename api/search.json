[{"id":"c29f35e523bfa6a4a96a466b52b72e7b","title":"é‡åº†åå…«æ¢¯","content":"åˆšèµ°è¿›åå…«æ¢¯è¢«ä¸€é¦–æ­Œæ›²æ‰€å¸å¼•ï¼Œâ€æˆ‘çˆ±ä½ ä¸­å›½â€ï¼Œè§¦æ™¯ç”Ÿæƒ…ï¼Œç›´æ¥èµ°è¿›å°é…’é¦†ï¼Œç¥–å›½ç”Ÿæ—¥å¿«ä¹ï¼\nç¥–å›½ç”Ÿæ—¥å¿«ä¹ï¼\n  \n  \n  \n  \n\n","slug":"é‡åº†åå…«æ¢¯","date":"2024-10-02T09:17:50.873Z","categories_index":"ç”Ÿæ´»","tags_index":"å°é…’é¦†,åå…«æ¢¯,æ‘‡æ»š,æˆ‘çˆ±ä½ ä¸­å›½,æ—…è¡Œ,å‡ºå·®","author_index":"Chuan"},{"id":"32c923e66e4f54ce39198d3387aea8b4","title":"æ€»è¦æ¥è¶Ÿé‡åº†å§","content":"åœ¨é‡åº†å‡ºå·®ï¼Œå¥½ä¸å®¹æ˜“ä¼‘æ¯å‡ å¤©å´è¢«é‡åº†çš„å¥‡è‘©åŸå¸‚ç»“æ„ç»™å¹²è·¨ï¼Œåœ¨é‡åº†çš„2ä¸‡400æ­¥é‚£çœŸæ˜¯è‹¦ä¸å ªè¨€ï¼Œèµ°åˆ°åå…«æ¢¯ä¸€ç§å£°éŸ³ç›´å‡»å¿ƒçµï¼Œæ¥ä¸€æ¯å°é…’å·´é€‚ä¸€ä¸‹ã€‚ğŸ‘\né‡åº†çš„å·´é€‚æ—¶å…‰\n  \n  Your browser does not support the video tag.\n\n","slug":"æ€»è¦æ¥è¶Ÿé‡åº†å§","date":"2024-10-01T12:46:57.254Z","categories_index":"ç”Ÿæ´»","tags_index":"é‡åº†,æ´ªå´–æ´,å°é…’é¦†,æœå¤©é—¨,åå…«æ¢¯,æ²™åªå","author_index":"Chuan"},{"id":"b64f86f375be7a8ad6ccdf0519ba2e1e","title":"æ­å»ºOpenVPNä¸€é”®è„šæœ¬","content":"ç›´æ¥å±•ç¤ºè„šæœ¬\n\n\n\n\n\n\n\n\nOpenVPN æ˜¯ä¸€ç§å¼€æºçš„è™šæ‹Ÿä¸“ç”¨ç½‘ç»œï¼ˆVPNï¼‰è½¯ä»¶ï¼Œç”¨äºå»ºç«‹å®‰å…¨ã€åŠ å¯†çš„ç‚¹å¯¹ç‚¹æˆ–ç«™ç‚¹å¯¹ç«™ç‚¹çš„è¿æ¥ï¼ŒOpenVPN ä½¿ç”¨ SSL&#x2F;TLS åŠ å¯†åè®®æ¥ç¡®ä¿å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„æ•°æ®ä¼ è¾“å®‰å…¨ã€‚è¿™ç§åŠ å¯†å¯ä»¥é˜²æ­¢ç½‘ç»œæ•°æ®åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­è¢«ç¬¬ä¸‰æ–¹çªƒå–æˆ–ç¯¡æ”¹ã€‚\n1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192939495969798991001011021031041051061071081091101111121131141151161171181191201211221231241251261271281291301311321331341351361371381391401411421431441451461471481491501511521531541551561571581591601611621631641651661671681691701711721731741751761771781791801811821831841851861871881891901911921931941951961971981992002012022032042052062072082092102112122132142152162172182192202212222232242252262272282292302312322332342352362372382392402412422432442452462472482492502512522532542552562572582592602612622632642652662672682692702712722732742752762772782792802812822832842852862872882892902912922932942952962972982993003013023033043053063073083093103113123133143153163173183193203213223233243253263273283293303313323333343353363373383393403413423433443453463473483493503513523533543553563573583593603613623633643653663673683693703713723733743753763773783793803813823833843853863873883893903913923933943953963973983994004014024034044054064074084094104114124134144154164174184194204214224234244254264274284294304314324334344354364374384394404414424434444454464474484494504514524534544554564574584594604614624634644654664674684694704714724734744754764774784794804814824834844854864874884894904914924934944954964974984995005015025035045055065075085095105115125135145155165175185195205215225235245255265275285295305315325335345355365375385395405415425435445455465475485495505515525535545555565575585595605615625635645655665675685695705715725735745755765775785795805815825835845855865875885895905915925935945955965975985996006016026036046056066076086096106116126136146156166176186196206216226236246256266276286296306316326336346356366376386396406416426436446456466476486496506516526536546556566576586596606616626636646656666676686696706716726736746756766776786796806816826836846856866876886896906916926936946956966976986997007017027037047057067077087097107117127137147157167177187197207217227237247257267277287297307317327337347357367377387397407417427437447457467477487497507517527537547557567577587597607617627637647657667677687697707717727737747757767777787797807817827837847857867877887897907917927937947957967977987998008018028038048058068078088098108118128138148158168178188198208218228238248258268278288298308318328338348358368378388398408418428438448458468478488498508518528538548558568578588598608618628638648658668678688698708718728738748758768778788798808818828838848858868878888898908918928938948958968978988999009019029039049059069079089099109119129139149159169179189199209219229239249259269279289299309319329339349359369379389399409419429439449459469479489499509519529539549559569579589599609619629639649659669679689699709719729739749759769779789799809819829839849859869879889899909919929939949959969979989991000100110021003100410051006100710081009101010111012101310141015101610171018101910201021102210231024102510261027102810291030103110321033103410351036103710381039104010411042104310441045104610471048104910501051105210531054105510561057105810591060106110621063106410651066106710681069107010711072107310741075107610771078107910801081108210831084108510861087108810891090109110921093109410951096109710981099110011011102110311041105110611071108110911101111111211131114111511161117111811191120112111221123112411251126112711281129113011311132113311341135113611371138113911401141114211431144114511461147114811491150115111521153115411551156115711581159116011611162116311641165116611671168116911701171117211731174117511761177117811791180118111821183118411851186118711881189119011911192119311941195119611971198119912001201120212031204#!/bin/bashfunction isRoot () &#123;\tif [ &quot;$EUID&quot; -ne 0 ]; then\t\treturn 1\tfi&#125;function tunAvailable () &#123;\tif [ ! -e /dev/net/tun ]; then\t\treturn 1\tfi&#125;function checkOS () &#123;\tif [[ -e /etc/debian_version ]]; then\t\tOS=&quot;debian&quot;\t\tsource /etc/os-release\t\tif [[ &quot;$ID&quot; == &quot;debian&quot; ]]; then\t\t\tif [[ ! $VERSION_ID =~ (8|9) ]]; then\t\t\t\techo &quot;âš ï¸ å½“å‰è„šæœ¬ä¸æ”¯æŒæ­¤Debianç‰ˆæœ¬.&quot;\t\t\t\techo &quot;&quot;\t\t\t\techo &quot;ä½†æ˜¯ï¼Œå¦‚æœä½ ä½¿ç”¨çš„Debianç³»ç»Ÿç‰ˆæœ¬ &gt;= 9 é‚£ä¹ˆä½ å¯ä»¥å°è¯•ç»§ç»­.&quot;\t\t\t\techo &quot;è¯·æ³¨æ„ä»–ä»¬ä¸è¢«æ”¯æŒ&quot;\t\t\t\techo &quot;&quot;\t\t\t\tuntil [[ $CONTINUE =~ (y|n) ]]; do\t\t\t\t\tread -rp &quot;æ˜¯å¦ç»§ç»­? [y/n]: &quot; -e CONTINUE\t\t\t\tdone\t\t\t\tif [[ &quot;$CONTINUE&quot; = &quot;n&quot; ]]; then\t\t\t\t\texit 1\t\t\t\tfi\t\t\tfi\t\telif [[ &quot;$ID&quot; == &quot;ubuntu&quot; ]];then\t\t\tOS=&quot;ubuntu&quot;\t\t\tif [[ ! $VERSION_ID =~ (16.04|18.04) ]]; then\t\t\t\techo &quot;âš ï¸ å½“å‰è„šæœ¬ä¸æ”¯æŒæ­¤Ubuntuç‰ˆæœ¬.&quot;\t\t\t\techo &quot;&quot;\t\t\t\techo &quot;ä½†æ˜¯ï¼Œå¦‚æœä½ ä½¿ç”¨çš„Ubuntuç³»ç»Ÿç‰ˆæœ¬ &gt; 17 or beta, ä½ å¯ä»¥ç»§ç»­å®‰è£….&quot;\t\t\t\techo &quot;è¯·æ³¨æ„ä»–ä»¬ä¸è¢«æ”¯æŒ&quot;\t\t\t\techo &quot;&quot;\t\t\t\tuntil [[ $CONTINUE =~ (y|n) ]]; do\t\t\t\t\tread -rp &quot;æ˜¯å¦ç»§ç»­? [y/n]: &quot; -e CONTINUE\t\t\t\tdone\t\t\t\tif [[ &quot;$CONTINUE&quot; = &quot;n&quot; ]]; then\t\t\t\t\texit 1\t\t\t\tfi\t\t\tfi\t\tfi\telif [[ -e /etc/fedora-release ]]; then\t\tOS=fedora\telif [[ -e /etc/centos-release ]]; then\t\tif ! grep -qs &quot;^CentOS Linux release 7&quot; /etc/centos-release; then\t\t\techo &quot;ä½ çš„ CentOS ç‰ˆæœ¬æ— æ³•è¿è¡Œæ­¤è„šæœ¬.&quot;\t\t\techo &quot;æ­¤è„šæœ¬åªèƒ½åœ¨ CentOS 7 ä¸­è¿è¡Œ.&quot;\t\t\techo &quot;&quot;\t\t\tunset CONTINUE\t\t\tuntil [[ $CONTINUE =~ (y|n) ]]; do\t\t\t\tread -rp &quot;æ˜¯å¦ç»§ç»­? [y/n]: &quot; -e CONTINUE\t\t\tdone\t\t\tif [[ &quot;$CONTINUE&quot; = &quot;n&quot; ]]; then\t\t\t\techo &quot;å¥½å§,å†è§!&quot;\t\t\t\texit 1\t\t\tfi\t\tfi\t\tOS=centos\telif [[ -e /etc/arch-release ]]; then\t\tOS=arch\telse\t\techo &quot;å‘ç°ä½ è¿è¡Œçš„Linuxç‰ˆæœ¬ä¸åœ¨ä»¥ä¸‹èŒƒå›´å†…: Debian, Ubuntu, Fedora, CentOS or Arch Linux system&quot;\t\texit 1\tfi&#125;function initialCheck () &#123;\tif ! isRoot; then\t\techo &quot;è¯·ä½¿ç”¨rootæ¥è¿›è¡Œæ“ä½œ&quot;\t\texit 1\tfi\tif ! tunAvailable; then\t\techo &quot;TUN ä¸å¯ç”¨&quot;\t\texit 1\tfi\tcheckOS&#125;function installUnbound () &#123;\tif [[ ! -e /etc/unbound/unbound.conf ]]; then\t\tif [[ &quot;$OS&quot; =~ (debian|ubuntu) ]]; then\t\t\tapt-get install -y unbound\t\t\t# Configuration\t\t\techo &#x27;interface: 10.8.0.1access-control: 10.8.0.1/24 allowhide-identity: yeshide-version: yesuse-caps-for-id: yesprefetch: yes&#x27; &gt;&gt; /etc/unbound/unbound.conf\t\telif [[ &quot;$OS&quot; = &quot;centos&quot; ]]; then\t\t\tyum install -y unbound\t\t\t# Configuration\t\t\tsed -i &#x27;s|# interface: 0.0.0.0$|interface: 10.8.0.1|&#x27; /etc/unbound/unbound.conf\t\t\tsed -i &#x27;s|# access-control: 127.0.0.0/8 allow|access-control: 10.8.0.1/24 allow|&#x27; /etc/unbound/unbound.conf\t\t\tsed -i &#x27;s|# hide-identity: no|hide-identity: yes|&#x27; /etc/unbound/unbound.conf\t\t\tsed -i &#x27;s|# hide-version: no|hide-version: yes|&#x27; /etc/unbound/unbound.conf\t\t\tsed -i &#x27;s|use-caps-for-id: no|use-caps-for-id: yes|&#x27; /etc/unbound/unbound.conf\t\telif [[ &quot;$OS&quot; = &quot;fedora&quot; ]]; then\t\t\tdnf install -y unbound\t\t\t# Configuration\t\t\tsed -i &#x27;s|# interface: 0.0.0.0$|interface: 10.8.0.1|&#x27; /etc/unbound/unbound.conf\t\t\tsed -i &#x27;s|# access-control: 127.0.0.0/8 allow|access-control: 10.8.0.1/24 allow|&#x27; /etc/unbound/unbound.conf\t\t\tsed -i &#x27;s|# hide-identity: no|hide-identity: yes|&#x27; /etc/unbound/unbound.conf\t\t\tsed -i &#x27;s|# hide-version: no|hide-version: yes|&#x27; /etc/unbound/unbound.conf\t\t\tsed -i &#x27;s|# use-caps-for-id: no|use-caps-for-id: yes|&#x27; /etc/unbound/unbound.conf\t\telif [[ &quot;$OS&quot; = &quot;arch&quot; ]]; then\t\t\tpacman -Syu --noconfirm unbound\t\t\t# Get root servers list\t\t\tcurl -o /etc/unbound/root.hints https://www.internic.net/domain/named.cache\t\t\tmv /etc/unbound/unbound.conf /etc/unbound/unbound.conf.old\t\t\techo &#x27;server:\tuse-syslog: yes\tdo-daemonize: no\tusername: &quot;unbound&quot;\tdirectory: &quot;/etc/unbound&quot;\ttrust-anchor-file: trusted-key.key\troot-hints: root.hints\tinterface: 10.8.0.1\taccess-control: 10.8.0.1/24 allow\tport: 53\tnum-threads: 2\tuse-caps-for-id: yes\tharden-glue: yes\thide-identity: yes\thide-version: yes\tqname-minimisation: yes\tprefetch: yes&#x27; &gt; /etc/unbound/unbound.conf\t\tfi\t\tif [[ ! &quot;$OS&quot; =~ (fedora|centos) ]];then\t\t\t# DNS Rebinding fix\t\t\techo &quot;private-address: 10.0.0.0/8private-address: 172.16.0.0/12private-address: 192.168.0.0/16private-address: 169.254.0.0/16private-address: fd00::/8private-address: fe80::/10private-address: 127.0.0.0/8private-address: ::ffff:0:0/96&quot; &gt;&gt; /etc/unbound/unbound.conf\t\tfi\telse # Unbound is already installed\t\techo &#x27;include: /etc/unbound/openvpn.conf&#x27; &gt;&gt; /etc/unbound/unbound.conf\t\t# Add Unbound &#x27;server&#x27; for the OpenVPN subnet\t\techo &#x27;server:interface: 10.8.0.1access-control: 10.8.0.1/24 allowhide-identity: yeshide-version: yesuse-caps-for-id: yesprefetch: yesprivate-address: 10.0.0.0/8private-address: 172.16.0.0/12private-address: 192.168.0.0/16private-address: 169.254.0.0/16private-address: fd00::/8private-address: fe80::/10private-address: 127.0.0.0/8private-address: ::ffff:0:0/96&#x27; &gt; /etc/unbound/openvpn.conf\tfi\t\tsystemctl enable unbound\t\tsystemctl restart unbound&#125;function installQuestions () &#123;\techo &quot;å°†ä¼šè¯¢é—®æ‚¨ä¸€äº›å¿…è¦çš„å®‰è£…ç”¨çš„ä¿¡æ¯.&quot;\techo &quot;ä½ å¯ä»¥ä¿®æ”¹é»˜è®¤é€‰é¡¹æˆ–è€…ä¸€ç›´æŒ‰å›è½¦ä½¿ç”¨è¿™äº›é»˜è®¤é€‰é¡¹.&quot;\techo &quot;&quot;\techo &quot;æˆ‘éœ€è¦è·å–å½“å‰ç½‘ç»œçš„ IPv4 åœ°å€ ç¡®ä¿OpenVPNçš„æ­£å¸¸å®‰è£….&quot;\techo &quot;é™¤éä½ æƒ³è¦ä½¿ç”¨å±€åŸŸç½‘ï¼Œä½ éœ€è¦æœ‰ä¸€ä¸ªå…¬ç½‘IP.&quot;\t# Detect public IPv4 address and pre-fill for the user\tIP=$(ip addr | grep &#x27;inet&#x27; | grep -v inet6 | grep -vE &#x27;127\\.[0-9]&#123;1,3&#125;\\.[0-9]&#123;1,3&#125;\\.[0-9]&#123;1,3&#125;&#x27; | grep -oE &#x27;[0-9]&#123;1,3&#125;\\.[0-9]&#123;1,3&#125;\\.[0-9]&#123;1,3&#125;\\.[0-9]&#123;1,3&#125;&#x27; | head -1)\tread -rp &quot;IP address: &quot; -e -i &quot;$IP&quot; IP\t#Â If $IP is a private IP address, the server must be behind NAT\tif echo &quot;$IP&quot; | grep -qE &#x27;^(10\\.|172\\.1[6789]\\.|172\\.2[0-9]\\.|172\\.3[01]\\.|192\\.168)&#x27;; then\t\techo &quot;&quot;\t\techo &quot;è¿™çœ‹èµ·æ¥åƒæ˜¯å±€åŸŸç½‘ï¼Œä½ çš„å…¬ç½‘IPåœ°å€ä»€ä¹ˆ?&quot;\t\techo &quot;æˆ‘ä»¬éœ€è¦å®ƒæ¥ç¡®ä¿ä½ çš„å®¢æˆ·ç«¯è¿æ¥æ­¤æœåŠ¡ç«¯.&quot;\t\tuntil [[ &quot;$PUBLICIP&quot; != &quot;&quot; ]]; do\t\t\tread -rp &quot;å…¬ç½‘IPv4åœ°å€æˆ–è€…åŸŸå: &quot; -e PUBLICIP\t\tdone\tfi\techo &quot;&quot;\techo &quot;æ£€æŸ¥IPv6è¿é€šæ€§...&quot;\techo &quot;&quot;\t# &quot;ping6&quot; and &quot;ping -6&quot; availability varies depending on the distribution\tif type ping6 &gt; /dev/null 2&gt;&amp;1; then\t\tPING6=&quot;ping6 -c3 ipv6.google.com &gt; /dev/null 2&gt;&amp;1&quot;\telse\t\tPING6=&quot;ping -6 -c3 ipv6.google.com &gt; /dev/null 2&gt;&amp;1&quot;\tfi\tif eval &quot;$PING6&quot;; then\t\techo &quot;å½“å‰host IPv6 è¿é€šæ€§æ­£å¸¸.&quot;\t\tSUGGESTION=&quot;y&quot;\telse\t\techo &quot;å½“å‰host IPv6 è¿é€šæ€§ä¸æ­£å¸¸.&quot;\t\tSUGGESTION=&quot;n&quot;\tfi\techo &quot;&quot;\t# Ask the user if they want to enable IPv6 regardless its availability.\tuntil [[ $IPV6_SUPPORT =~ (y|n) ]]; do\t\tread -rp &quot;æ˜¯å¦å¯ç”¨ IPv6 æ”¯æŒ (NAT)? [y/n]: &quot; -e -i $SUGGESTION IPV6_SUPPORT\tdone\techo &quot;&quot;\techo &quot;è¯·é€‰æ‹© OpenVPN ç›‘å¬çš„ç«¯å£?&quot;\techo &quot;   1) é»˜è®¤: 1194&quot;\techo &quot;   2) è¾“å…¥&quot;\techo &quot;   3) éšæœº [49152-65535]&quot;\tuntil [[ &quot;$PORT_CHOICE&quot; =~ ^[1-3]$ ]]; do\t\tread -rp &quot;ç«¯å£é€‰é¡¹ [1-3]: &quot; -e -i 1 PORT_CHOICE\tdone\tcase $PORT_CHOICE in\t\t1)\t\t\tPORT=&quot;1194&quot;\t\t;;\t\t2)\t\t\tuntil [[ &quot;$PORT&quot; =~ ^[0-9]+$ ]] &amp;&amp; [ &quot;$PORT&quot; -ge 1 ] &amp;&amp; [ &quot;$PORT&quot; -le 65535 ]; do\t\t\t\tread -rp &quot;è¾“å…¥ç«¯å£ [1-65535]: &quot; -e -i 1194 PORT\t\t\tdone\t\t;;\t\t3)\t\t\t# Generate random number within private ports range\t\t\tPORT=$(shuf -i49152-65535 -n1)\t\t\techo &quot;éšæœºç«¯å£: $PORT&quot;\t\t;;\tesac\techo &quot;&quot;\techo &quot;OpenVPN ä½¿ç”¨ä»€ä¹ˆåè®® UDP/TCP?&quot;\techo &quot;UDP ååˆ†å¿«é€Ÿ. é™¤éUDPæ— æ³•ä½¿ç”¨ï¼Œä¸æ¨èä½¿ç”¨TCP.&quot;\techo &quot;   1) UDP&quot;\techo &quot;   2) TCP&quot;\tuntil [[ &quot;$PROTOCOL_CHOICE&quot; =~ ^[1-2]$ ]]; do\t\tread -rp &quot;Protocol [1-2]: &quot; -e -i 1 PROTOCOL_CHOICE\tdone\tcase $PROTOCOL_CHOICE in\t\t1)\t\t\tPROTOCOL=&quot;udp&quot;\t\t;;\t\t2)\t\t\tPROTOCOL=&quot;tcp&quot;\t\t;;\tesac\techo &quot;&quot;\techo &quot;æ‚¨å¸Œæœ›å°†å“ªä¸ªDNSè§£ææœåŠ¡ç”¨äºVPN ?&quot;\techo &quot;   1) æ­£ç¡®çš„ç³»ç»Ÿè§£æå™¨ (from /etc/resolv.conf)&quot;\techo &quot;   2) å½“å‰host DNS è§£æå™¨ (Unbound)&quot;\techo &quot;   3) Cloudflare (Anycast: worldwide)&quot;\techo &quot;   4) Quad9 (Anycast: worldwide)&quot;\techo &quot;   5) Quad9 uncensored (Anycast: worldwide)&quot;\techo &quot;   6) FDN (France)&quot;\techo &quot;   7) DNS.WATCH (Germany)&quot;\techo &quot;   8) OpenDNS (Anycast: worldwide)&quot;\techo &quot;   9) Google (Anycast: worldwide)&quot;\techo &quot;   10) Yandex Basic (Russia)&quot;\techo &quot;   11) AdGuard DNS (Russia)&quot;\tuntil [[ &quot;$DNS&quot; =~ ^[0-9]+$ ]] &amp;&amp; [ &quot;$DNS&quot; -ge 1 ] &amp;&amp; [ &quot;$DNS&quot; -le 11 ]; do\t\tread -rp &quot;DNS [1-10]: &quot; -e -i 3 DNS\t\t\tif [[ $DNS == 2 ]] &amp;&amp; [[ -e /etc/unbound/unbound.conf ]]; then\t\t\t\techo &quot;&quot;\t\t\t\techo &quot;Unbound å·²ç»å®‰è£….&quot;\t\t\t\techo &quot;æ‚¨å¯ä»¥å…è®¸è„šæœ¬å¯¹å…¶è¿›è¡Œé…ç½®ï¼Œä»¥ä¾¿ä»OpenVPNå®¢æˆ·ç«¯ä½¿ç”¨å®ƒ&quot;\t\t\t\techo &quot;æˆ‘ä»¬å°†ç®€å•çš„æ·»åŠ ä¸€ä¸ªæœåŠ¡ç«¯åœ¨ /etc/unbound/unbound.conf å¯¹äºOpenVPNå­ç½‘.&quot;\t\t\t\techo &quot;æ²¡æœ‰å¯¹å½“å‰é…ç½®è¿›è¡Œä»»ä½•æ›´æ”¹.&quot;\t\t\t\techo &quot;&quot;\t\t\t\tuntil [[ $CONTINUE =~ (y|n) ]]; do\t\t\t\t\tread -rp &quot;å°†é…ç½®æ›´æ”¹åº”ç”¨äºUnbound? æ¨èé»˜è®¤å›è½¦ [y/n]: &quot; -e CONTINUE\t\t\t\tdone\t\t\t\tif [[ $CONTINUE = &quot;n&quot; ]];then\t\t\t\t\t# Break the loop and cleanup\t\t\t\t\tunset DNS\t\t\t\t\tunset CONTINUE\t\t\t\tfi\t\t\tfi\tdone\techo &quot;&quot;\techo &quot;ä½ æƒ³ä½¿ç”¨å‹ç¼©å—ï¼Ÿ ç”±äºVORACLEæ”»å‡»ä½¿ç”¨å®ƒï¼Œå› æ­¤ä¸æ¨èä½¿ç”¨å®ƒã€‚&quot;\tuntil [[ $COMPRESSION_ENABLED =~ (y|n) ]]; do\t\tread -rp&quot;å¯ç”¨å‹ç¼© æ¨èé»˜è®¤å›è½¦? [y/n]: &quot; -e -i n COMPRESSION_ENABLED\tdone\tif [[ $COMPRESSION_ENABLED == &quot;y&quot; ]];then\t\techo &quot;é€‰æ‹©ä¸€ä¸ªå‹ç¼©ç®—æ³•:&quot;\t\techo &quot;   1) LZ4 (æ›´åŠ æ•ˆç‡)&quot;\t\techo &quot;   2) LZ0&quot;\t\tuntil [[ $COMPRESSION_CHOICE =~ ^[1-2]$ ]]; do\t\t\tread -rp&quot;å‹ç¼©ç®—æ³• [1-2]: &quot; -e -i 1 COMPRESSION_CHOICE\t\tdone\t\tcase $COMPRESSION_CHOICE in\t\t\t1)\t\t\tCOMPRESSION_ALG=&quot;lz4&quot;\t\t\t;;\t\t\t2)\t\t\tCOMPRESSION_ALG=&quot;lzo&quot;\t\t\t;;\t\tesac\tfi\techo &quot;&quot;\techo &quot;æ˜¯å¦è¦è‡ªå®šä¹‰åŠ å¯†è®¾ç½®?&quot;\techo &quot;Unless you know what you&#x27;re doing, you should stick with the default parameters provided by the script.&quot;\techo &quot;é™¤éä½ çŸ¥é“è‡ªå·±åœ¨åšä»€ä¹ˆï¼Œå¦åˆ™ä½ åº”è¯¥ä½¿ç”¨è„šæœ¬æä¾›çš„é»˜è®¤å‚æ•°&quot;\techo &quot;&quot;\tuntil [[ $CUSTOMIZE_ENC =~ (y|n) ]]; do\t\tread -rp &quot;è‡ªå®šä¹‰åŠ å¯†è®¾ç½®? [y/n]: &quot; -e -i n CUSTOMIZE_ENC\tdone\tif [[ $CUSTOMIZE_ENC == &quot;n&quot; ]];then\t\t# Use default, sane and fast parameters\t\tCIPHER=&quot;AES-128-GCM&quot;\t\tCERT_TYPE=&quot;1&quot; # ECDSA\t\tCERT_CURVE=&quot;prime256v1&quot;\t\tCC_CIPHER=&quot;TLS-ECDHE-ECDSA-WITH-AES-128-GCM-SHA256&quot;\t\tDH_TYPE=&quot;1&quot; # ECDH\t\tDH_CURVE=&quot;prime256v1&quot;\t\tHMAC_ALG=&quot;SHA256&quot;\t\tTLS_SIG=&quot;1&quot; # tls-crypt\telse\t\techo &quot;&quot;\t\techo &quot;é€‰æ‹©è¦ç”¨äºæ•°æ®é€šé“çš„åŠ å¯†æ–¹å¼:&quot;\t\techo &quot;   1) AES-128-GCM (recommended)&quot;\t\techo &quot;   2) AES-192-GCM&quot;\t\techo &quot;   3) AES-256-GCM&quot;\t\techo &quot;   4) AES-128-CBC&quot;\t\techo &quot;   5) AES-192-CBC&quot;\t\techo &quot;   6) AES-256-CBC&quot;\t\tuntil [[ &quot;$CIPHER_CHOICE&quot; =~ ^[1-6]$ ]]; do\t\t\tread -rp &quot;åŠ å¯†æ–¹å¼ [1-6]: &quot; -e -i 1 CIPHER_CHOICE\t\tdone\t\tcase $CIPHER_CHOICE in\t\t\t1)\t\t\t\tCIPHER=&quot;AES-128-GCM&quot;\t\t\t;;\t\t\t2)\t\t\t\tCIPHER=&quot;AES-192-GCM&quot;\t\t\t;;\t\t\t3)\t\t\t\tCIPHER=&quot;AES-256-GCM&quot;\t\t\t;;\t\t\t4)\t\t\t\tCIPHER=&quot;AES-128-CBC&quot;\t\t\t;;\t\t\t5)\t\t\t\tCIPHER=&quot;AES-192-CBC&quot;\t\t\t;;\t\t\t6)\t\t\t\tCIPHER=&quot;AES-256-CBC&quot;\t\t\t;;\t\tesac\t\techo &quot;&quot;\t\techo &quot;é€‰æ‹©æ‚¨è¦ä½¿ç”¨çš„è¯ä¹¦ç±»å‹:&quot;\t\techo &quot;   1) ECDSA (recommended)&quot;\t\techo &quot;   2) RSA&quot;\t\tuntil [[ $CERT_TYPE =~ ^[1-2]$ ]]; do\t\t\tread -rp&quot;è¯ä¹¦ç±»å‹ [1-2]: &quot; -e -i 1 CERT_TYPE\t\tdone\t\tcase $CERT_TYPE in\t\t\t1)\t\t\t\techo &quot;&quot;\t\t\t\techo &quot;é€‰æ‹©è¦ç”¨äºè¯ä¹¦å¯†é’¥çš„åè®®:&quot;\t\t\t\techo &quot;   1) prime256v1 (recommended)&quot;\t\t\t\techo &quot;   2) secp384r1&quot;\t\t\t\techo &quot;   3) secp521r1&quot;\t\t\t\tuntil [[ $CERT_CURVE_CHOICE =~ ^[1-3]$ ]]; do\t\t\t\t\tread -rp&quot;Curve [1-3]: &quot; -e -i 1 CERT_CURVE_CHOICE\t\t\t\tdone\t\t\t\tcase $CERT_CURVE_CHOICE in\t\t\t\t\t1)\t\t\t\t\t\tCERT_CURVE=&quot;prime256v1&quot;\t\t\t\t\t;;\t\t\t\t\t2)\t\t\t\t\t\tCERT_CURVE=&quot;secp384r1&quot;\t\t\t\t\t;;\t\t\t\t\t3)\t\t\t\t\t\tCERT_CURVE=&quot;secp521r1&quot;\t\t\t\t\t;;\t\t\t\tesac\t\t\t;;\t\t\t2)\t\t\t\techo &quot;&quot;\t\t\t\techo &quot;é€‰æ‹©è¦ç”¨äºè¯ä¹¦çš„RSAå¯†é’¥çš„å¤§å°:&quot;\t\t\t\techo &quot;   1) 2048 bits (recommended)&quot;\t\t\t\techo &quot;   2) 3072 bits&quot;\t\t\t\techo &quot;   3) 4096 bits&quot;\t\t\t\tuntil [[ &quot;$RSA_KEY_SIZE_CHOICE&quot; =~ ^[1-3]$ ]]; do\t\t\t\t\tread -rp &quot;RSA key size [1-3]: &quot; -e -i 1 RSA_KEY_SIZE_CHOICE\t\t\t\tdone\t\t\t\tcase $RSA_KEY_SIZE_CHOICE in\t\t\t\t\t1)\t\t\t\t\t\tRSA_KEY_SIZE=&quot;2048&quot;\t\t\t\t\t;;\t\t\t\t\t2)\t\t\t\t\t\tRSA_KEY_SIZE=&quot;3072&quot;\t\t\t\t\t;;\t\t\t\t\t3)\t\t\t\t\t\tRSA_KEY_SIZE=&quot;4096&quot;\t\t\t\t\t;;\t\t\t\tesac\t\t\t;;\t\tesac\t\techo &quot;&quot;\t\techo &quot;é€‰æ‹©è¦ç”¨äºæ§åˆ¶é€šé“çš„åŠ å¯†æ–¹å¼:&quot;\t\tcase $CERT_TYPE in\t\t\t1)\t\t\t\techo &quot;   1) ECDHE-ECDSA-AES-128-GCM-SHA256 (recommended)&quot;\t\t\t\techo &quot;   2) ECDHE-ECDSA-AES-256-GCM-SHA384&quot;\t\t\t\tuntil [[ $CC_CIPHER_CHOICE =~ ^[1-2]$ ]]; do\t\t\t\t\tread -rp&quot;Control channel cipher [1-2]: &quot; -e -i 1 CC_CIPHER_CHOICE\t\t\t\tdone\t\t\t\tcase $CC_CIPHER_CHOICE in\t\t\t\t\t1)\t\t\t\t\t\tCC_CIPHER=&quot;TLS-ECDHE-ECDSA-WITH-AES-128-GCM-SHA256&quot;\t\t\t\t\t;;\t\t\t\t\t2)\t\t\t\t\t\tCC_CIPHER=&quot;TLS-ECDHE-ECDSA-WITH-AES-256-GCM-SHA384&quot;\t\t\t\t\t;;\t\t\t\tesac\t\t\t;;\t\t\t2)\t\t\t\techo &quot;   1) ECDHE-RSA-AES-128-GCM-SHA256 (recommended)&quot;\t\t\t\techo &quot;   2) ECDHE-RSA-AES-256-GCM-SHA384&quot;\t\t\t\tuntil [[ $CC_CIPHER_CHOICE =~ ^[1-2]$ ]]; do\t\t\t\t\tread -rp&quot;Control channel cipher [1-2]: &quot; -e -i 1 CC_CIPHER_CHOICE\t\t\t\tdone\t\t\t\tcase $CC_CIPHER_CHOICE in\t\t\t\t\t1)\t\t\t\t\t\tCC_CIPHER=&quot;TLS-ECDHE-RSA-WITH-AES-128-GCM-SHA256&quot;\t\t\t\t\t;;\t\t\t\t\t2)\t\t\t\t\t\tCC_CIPHER=&quot;TLS-ECDHE-RSA-WITH-AES-256-GCM-SHA384&quot;\t\t\t\t\t;;\t\t\t\tesac\t\t\t;;\t\tesac\t\techo &quot;&quot;\t\techo &quot;é€‰æ‹©æ‚¨è¦ä½¿ç”¨çš„Diffie-Hellmanå£ä»¤:&quot;\t\techo &quot;   1) ECDH (recommended)&quot;\t\techo &quot;   2) DH&quot;\t\tuntil [[ $DH_TYPE =~ [1-2] ]]; do\t\t\tread -rp&quot;DH å£ä»¤ç±»å‹ [1-2]: &quot; -e -i 1 DH_TYPE\t\tdone\t\tcase $DH_TYPE in\t\t\t1)\t\t\t\techo &quot;&quot;\t\t\t\techo &quot;é€‰æ‹©è¦ç”¨äºECDHå£ä»¤:&quot;\t\t\t\techo &quot;   1) prime256v1 (recommended)&quot;\t\t\t\techo &quot;   2) secp384r1&quot;\t\t\t\techo &quot;   3) secp521r1&quot;\t\t\t\twhile [[ $DH_CURVE_CHOICE != &quot;1&quot; &amp;&amp; $DH_CURVE_CHOICE != &quot;2&quot; &amp;&amp; $DH_CURVE_CHOICE != &quot;3&quot; ]]; do\t\t\t\t\tread -rp&quot;Curve [1-3]: &quot; -e -i 1 DH_CURVE_CHOICE\t\t\t\tdone\t\t\t\tcase $DH_CURVE_CHOICE in\t\t\t\t\t1)\t\t\t\t\t\tDH_CURVE=&quot;prime256v1&quot;\t\t\t\t\t;;\t\t\t\t\t2)\t\t\t\t\t\tDH_CURVE=&quot;secp384r1&quot;\t\t\t\t\t;;\t\t\t\t\t3)\t\t\t\t\t\tDH_CURVE=&quot;secp521r1&quot;\t\t\t\t\t;;\t\t\t\tesac\t\t\t;;\t\t\t2)\t\t\t\techo &quot;&quot;\t\t\t\techo &quot;é€‰æ‹©è¦ä½¿ç”¨çš„Diffie-Hellmané”®çš„å¤§å°:&quot;\t\t\t\techo &quot;   1) 2048 bits (recommended)&quot;\t\t\t\techo &quot;   2) 3072 bits&quot;\t\t\t\techo &quot;   3) 4096 bits&quot;\t\t\t\tuntil [[ &quot;$DH_KEY_SIZE_CHOICE&quot; =~ ^[1-3]$ ]]; do\t\t\t\t\tread -rp &quot;DH key size [1-3]: &quot; -e -i 1 DH_KEY_SIZE_CHOICE\t\t\t\tdone\t\t\t\tcase $DH_KEY_SIZE_CHOICE in\t\t\t\t\t1)\t\t\t\t\t\tDH_KEY_SIZE=&quot;2048&quot;\t\t\t\t\t;;\t\t\t\t\t2)\t\t\t\t\t\tDH_KEY_SIZE=&quot;3072&quot;\t\t\t\t\t;;\t\t\t\t\t3)\t\t\t\t\t\tDH_KEY_SIZE=&quot;4096&quot;\t\t\t\t\t;;\t\t\t\tesac\t\t\t;;\t\tesac\t\techo &quot;&quot;\t\t# The &quot;auth&quot; options behaves differently with AEAD ciphers\t\tif [[ &quot;$CIPHER&quot; =~ CBC$ ]]; then\t\t\techo &quot;æ‘˜è¦ç®—æ³•éªŒè¯æ¥è‡ªæ§åˆ¶ä¿¡é“çš„æ•°æ®ä¿¡é“åˆ†ç»„å’Œtls-authåˆ†ç»„.&quot;\t\telif [[ &quot;$CIPHER&quot; =~ GCM$ ]]; then\t\t\techo &quot;æ‘˜è¦ç®—æ³•éªŒè¯æ¥è‡ªæ§åˆ¶ä¿¡é“çš„tls-authæ•°æ®åŒ….&quot;\t\tfi\t\techo &quot;å“ªç§æ‘˜è¦ç®—æ³•ç”¨äºä½ çš„ HMAC?&quot;\t\techo &quot;   1) SHA-256 (recommended)&quot;\t\techo &quot;   2) SHA-384&quot;\t\techo &quot;   3) SHA-512&quot;\t\tuntil [[ $HMAC_ALG_CHOICE =~ ^[1-3]$ ]]; do\t\t\tread -rp &quot;Digest algorithm [1-3]: &quot; -e -i 1 HMAC_ALG_CHOICE\t\tdone\t\tcase $HMAC_ALG_CHOICE in\t\t\t1)\t\t\t\tHMAC_ALG=&quot;SHA256&quot;\t\t\t;;\t\t\t2)\t\t\t\tHMAC_ALG=&quot;SHA384&quot;\t\t\t;;\t\t\t3)\t\t\t\tHMAC_ALG=&quot;SHA512&quot;\t\t\t;;\t\tesac\t\techo &quot;&quot;\t\techo &quot;æ‚¨å¯ä»¥ä½¿ç”¨tls-authå’Œtls-cryptå‘æ§åˆ¶é€šé“æ·»åŠ é¢å¤–çš„å®‰å…¨å±‚&quot;\t\techo &quot;tls-authå¯¹æ•°æ®åŒ…è¿›è¡Œèº«ä»½éªŒè¯ï¼Œè€Œtls-cryptå¯¹å…¶è¿›è¡Œèº«ä»½éªŒè¯å’ŒåŠ å¯†.&quot;\t\techo &quot;   1) tls-crypt (recommended)&quot;\t\techo &quot;   2) tls-auth&quot;\t\tuntil [[ $TLS_SIG =~ [1-2] ]]; do\t\t\t\tread -rp &quot;Control channel additional security mechanism [1-2]: &quot; -e -i 1 TLS_SIG\t\tdone\tfi\techo &quot;&quot;\techo &quot;å®‰è£…ä¿¡æ¯æ”¶é›†å®Œæˆï¼Œç°åœ¨å‡†å¤‡å¥½è®¾ç½®æ‚¨çš„OpenVPNæœåŠ¡å™¨.&quot;\techo &quot;æ‚¨å°†èƒ½å¤Ÿåœ¨å®‰è£…ç»“æŸæ—¶ç”Ÿæˆå®¢æˆ·ç«¯.&quot;\tread -n1 -r -p &quot;æŒ‰ä¸‹ä»»æ„é”®ç»§ç»­...&quot;&#125;function installOpenVPN () &#123;\t# Run setup questions first\tinstallQuestions\t# Get the &quot;public&quot; interface from the default route\tNIC=$(ip -4 route ls | grep default | grep -Po &#x27;(?&lt;=dev )(\\S+)&#x27; | head -1)\tif [[ &quot;$OS&quot; =~ (debian|ubuntu) ]]; then\t\tapt-get update\t\tapt-get -y install ca-certificates gnupg\t\t# We add the OpenVPN repo to get the latest version.\t\tif [[ &quot;$VERSION_ID&quot; = &quot;8&quot; ]]; then\t\t\techo &quot;deb http://build.openvpn.net/debian/openvpn/stable jessie main&quot; &gt; /etc/apt/sources.list.d/openvpn.list\t\t\twget -O - https://swupdate.openvpn.net/repos/repo-public.gpg | apt-key add -\t\t\tapt-get update\t\tfi\t\tif [[ &quot;$VERSION_ID&quot; = &quot;16.04&quot; ]]; then\t\t\techo &quot;deb http://build.openvpn.net/debian/openvpn/stable trusty main&quot; &gt; /etc/apt/sources.list.d/openvpn.list\t\t\twget -O - https://swupdate.openvpn.net/repos/repo-public.gpg | apt-key add -\t\t\tapt-get update\t\tfi\t\t# Ubuntu &gt; 16.04 and Debian &gt; 8 have OpenVPN &gt;= 2.4 without the need of a third party repository.\t\tapt-get install -y openvpn iptables openssl wget ca-certificates curl\telif [[ &quot;$OS&quot; = &#x27;centos&#x27; ]]; then\t\tyum install -y epel-release\t\tyum install -y openvpn iptables openssl wget ca-certificates curl\telif [[ &quot;$OS&quot; = &#x27;fedora&#x27; ]]; then\t\tdnf install -y openvpn iptables openssl wget ca-certificates curl\telif [[ &quot;$OS&quot; = &#x27;arch&#x27; ]]; then\t\techo &quot;&quot;\t\techo &quot;è­¦å‘Šï¼šå½“æ‚¨ä½¿ç”¨ArchLinuxæ—¶ï¼Œæˆ‘éœ€è¦æ›´æ–°ç³»ç»Ÿä¸Šçš„è½¯ä»¶åŒ…ä»¥å®‰è£…æˆ‘éœ€è¦çš„è½¯ä»¶åŒ….&quot;\t\techo &quot;ä¸è¿™æ ·åšå¯èƒ½ä¼šå¯¼è‡´ä¾èµ–å…³ç³»ä¹‹é—´å‡ºç°é—®é¢˜ï¼Œæˆ–è€…ä¸¢å¤±å­˜å‚¨åº“ä¸­çš„æ–‡ä»¶ï¼ˆArch Linuxä¸æ”¯æŒéƒ¨åˆ†å‡çº§ï¼‰.&quot;\t\techo &quot;&quot;\t\techo &quot;ç»§ç»­å°†æ›´æ–°æ‚¨å®‰è£…çš„è½¯ä»¶åŒ…å¹¶å®‰è£…æ‰€éœ€çš„è½¯ä»¶åŒ….&quot;\t\techo &quot;&quot;\t\tunset CONTINUE\t\tuntil [[ $CONTINUE =~ (y|n) ]]; do\t\t\tread -rp &quot;ç»§ç»­? [y/n]: &quot; -e -i y CONTINUE\t\tdone\t\tif [[ &quot;$CONTINUE&quot; = &quot;n&quot; ]]; then\t\t\techo &quot;ç»ˆæ­¢å®‰è£… æ˜¯ç”¨æˆ·ä¸å…è®¸æ›´æ–°ç³»ç»Ÿ.&quot;\t\t\texit 4\t\tfi\t\t# Install required dependencies and upgrade the system\t\tpacman --needed --noconfirm -Syu openvpn iptables openssl wget ca-certificates curl\tfi\t# Find out if the machine uses nogroup or nobody for the permissionless group\tif grep -qs &quot;^nogroup:&quot; /etc/group; then\t\tNOGROUP=nogroup\telse\t\tNOGROUP=nobody\tfi\t# An old version of easy-rsa was available by default in some openvpn packages\tif [[ -d /etc/openvpn/easy-rsa/ ]]; then\t\trm -rf /etc/openvpn/easy-rsa/\tfi\t# Install the latest version of easy-rsa from source\tlocal version=&quot;3.0.5&quot;\twget -O ~/EasyRSA-nix-$&#123;version&#125;.tgz https://github.com/OpenVPN/easy-rsa/releases/download/v$&#123;version&#125;/EasyRSA-nix-$&#123;version&#125;.tgz\ttar xzf ~/EasyRSA-nix-$&#123;version&#125;.tgz -C ~/\tmv ~/EasyRSA-$&#123;version&#125;/ /etc/openvpn/\tmv /etc/openvpn/EasyRSA-$&#123;version&#125;/ /etc/openvpn/easy-rsa/\tchown -R root:root /etc/openvpn/easy-rsa/\trm -f ~/EasyRSA-nix-$&#123;version&#125;.tgz\tcd /etc/openvpn/easy-rsa/\tcase $CERT_TYPE in\t\t1)\t\t\techo &quot;set_var EASYRSA_ALGO ec&quot; &gt; vars\t\t\techo &quot;set_var EASYRSA_CURVE $CERT_CURVE&quot; &gt;&gt; vars\t\t;;\t\t2)\t\t\techo &quot;set_var EASYRSA_KEY_SIZE $RSA_KEY_SIZE&quot; &gt; vars\t\t;;\tesac\t# Generate a random, alphanumeric identifier of 16 characters for CN and one for server name\tSERVER_CN=&quot;cn_$(head /dev/urandom | tr -dc &#x27;a-zA-Z0-9&#x27; | fold -w 16 | head -n 1)&quot;\tSERVER_NAME=&quot;server_$(head /dev/urandom | tr -dc &#x27;a-zA-Z0-9&#x27; | fold -w 16 | head -n 1)&quot;\techo &quot;set_var EASYRSA_REQ_CN $SERVER_CN&quot; &gt;&gt; vars\t# Create the PKI, set up the CA, the DH params and the server certificate\t./easyrsa init-pki\t./easyrsa --batch build-ca nopass\tif [[ $DH_TYPE == &quot;2&quot; ]]; then\t\t# ECDH keys are generated on-the-fly so we don&#x27;t need to generate them beforehand\t\topenssl dhparam -out dh.pem $DH_KEY_SIZE\tfi\t./easyrsa build-server-full &quot;$SERVER_NAME&quot; nopass\tEASYRSA_CRL_DAYS=3650 ./easyrsa gen-crl\tcase $TLS_SIG in\t\t1)\t\t\t# Generate tls-crypt key\t\t\topenvpn --genkey --secret /etc/openvpn/tls-crypt.key\t\t;;\t\t2)\t\t\t# Generate tls-auth key\t\t\topenvpn --genkey --secret /etc/openvpn/tls-auth.key\t\t;;\tesac\t# Move all the generated files\tcp pki/ca.crt pki/private/ca.key &quot;pki/issued/$SERVER_NAME.crt&quot; &quot;pki/private/$SERVER_NAME.key&quot; /etc/openvpn/easy-rsa/pki/crl.pem /etc/openvpn\tif [[ $DH_TYPE == &quot;2&quot; ]]; then\t\tcp dh.pem /etc/openvpn\tfi\t# Make cert revocation list readable for non-root\tchmod 644 /etc/openvpn/crl.pem\t# Generate server.conf\techo &quot;port $PORT&quot; &gt; /etc/openvpn/server.conf\tif [[ &quot;$IPV6_SUPPORT&quot; = &#x27;n&#x27; ]]; then\t\techo &quot;proto $PROTOCOL&quot; &gt;&gt; /etc/openvpn/server.conf\telif [[ &quot;$IPV6_SUPPORT&quot; = &#x27;y&#x27; ]]; then\t\techo &quot;proto $&#123;PROTOCOL&#125;6&quot; &gt;&gt; /etc/openvpn/server.conf\tfi\techo &quot;dev tunuser nobodygroup $NOGROUPpersist-keypersist-tunkeepalive 10 120topology subnetserver 10.8.0.0 255.255.255.0ifconfig-pool-persist ipp.txt&quot; &gt;&gt; /etc/openvpn/server.conf\t# DNS resolvers\tcase $DNS in\t\t1)\t\t\t# Locate the proper resolv.conf\t\t\t# Needed for systems running systemd-resolved\t\t\tif grep -q &quot;127.0.0.53&quot; &quot;/etc/resolv.conf&quot;; then\t\t\t\tRESOLVCONF=&#x27;/run/systemd/resolve/resolv.conf&#x27;\t\t\telse\t\t\t\tRESOLVCONF=&#x27;/etc/resolv.conf&#x27;\t\t\tfi\t\t\t# Obtain the resolvers from resolv.conf and use them for OpenVPN\t\t\tgrep -v &#x27;#&#x27; $RESOLVCONF | grep &#x27;nameserver&#x27; | grep -E -o &#x27;[0-9]&#123;1,3&#125;\\.[0-9]&#123;1,3&#125;\\.[0-9]&#123;1,3&#125;\\.[0-9]&#123;1,3&#125;&#x27; | while read -r line; do\t\t\t\techo &quot;push \\&quot;dhcp-option DNS $line\\&quot;&quot; &gt;&gt; /etc/openvpn/server.conf\t\t\tdone\t\t;;\t\t2)\t\t\techo &#x27;push &quot;dhcp-option DNS 10.8.0.1&quot;&#x27; &gt;&gt; /etc/openvpn/server.conf\t\t;;\t\t3) # Cloudflare\t\t\techo &#x27;push &quot;dhcp-option DNS 1.0.0.1&quot;&#x27; &gt;&gt; /etc/openvpn/server.conf\t\t\techo &#x27;push &quot;dhcp-option DNS 1.1.1.1&quot;&#x27; &gt;&gt; /etc/openvpn/server.conf\t\t;;\t\t4) # Quad9\t\t\techo &#x27;push &quot;dhcp-option DNS 9.9.9.9&quot;&#x27; &gt;&gt; /etc/openvpn/server.conf\t\t\techo &#x27;push &quot;dhcp-option DNS 149.112.112.112&quot;&#x27; &gt;&gt; /etc/openvpn/server.conf\t\t;;\t\t5) # Quad9 uncensored\t\t\techo &#x27;push &quot;dhcp-option DNS 9.9.9.10&quot;&#x27; &gt;&gt; /etc/openvpn/server.conf\t\t\techo &#x27;push &quot;dhcp-option DNS 149.112.112.10&quot;&#x27; &gt;&gt; /etc/openvpn/server.conf\t\t;;\t\t6) # FDN\t\t\techo &#x27;push &quot;dhcp-option DNS 80.67.169.40&quot;&#x27; &gt;&gt; /etc/openvpn/server.conf\t\t\techo &#x27;push &quot;dhcp-option DNS 80.67.169.12&quot;&#x27; &gt;&gt; /etc/openvpn/server.conf\t\t;;\t\t7) # DNS.WATCH\t\t\techo &#x27;push &quot;dhcp-option DNS 84.200.69.80&quot;&#x27; &gt;&gt; /etc/openvpn/server.conf\t\t\techo &#x27;push &quot;dhcp-option DNS 84.200.70.40&quot;&#x27; &gt;&gt; /etc/openvpn/server.conf\t\t;;\t\t8) # OpenDNS\t\t\techo &#x27;push &quot;dhcp-option DNS 208.67.222.222&quot;&#x27; &gt;&gt; /etc/openvpn/server.conf\t\t\techo &#x27;push &quot;dhcp-option DNS 208.67.220.220&quot;&#x27; &gt;&gt; /etc/openvpn/server.conf\t\t;;\t\t9) # Google\t\t\techo &#x27;push &quot;dhcp-option DNS 8.8.8.8&quot;&#x27; &gt;&gt; /etc/openvpn/server.conf\t\t\techo &#x27;push &quot;dhcp-option DNS 8.8.4.4&quot;&#x27; &gt;&gt; /etc/openvpn/server.conf\t\t;;\t\t10) # Yandex Basic\t\t\techo &#x27;push &quot;dhcp-option DNS 77.88.8.8&quot;&#x27; &gt;&gt; /etc/openvpn/server.conf\t\t\techo &#x27;push &quot;dhcp-option DNS 77.88.8.1&quot;&#x27; &gt;&gt; /etc/openvpn/server.conf\t\t;;\t\t11) # AdGuard DNS\t\t\techo &#x27;push &quot;dhcp-option DNS 176.103.130.130&quot;&#x27; &gt;&gt; /etc/openvpn/server.conf\t\t\techo &#x27;push &quot;dhcp-option DNS 176.103.130.131&quot;&#x27; &gt;&gt; /etc/openvpn/server.conf\t\t;;\tesac\techo &#x27;push &quot;redirect-gateway def1 bypass-dhcp&quot; &#x27;&gt;&gt; /etc/openvpn/server.conf\t# IPv6 network settings if needed\tif [[ &quot;$IPV6_SUPPORT&quot; = &#x27;y&#x27; ]]; then\t\techo &#x27;server-ipv6 fd42:42:42:42::/112tun-ipv6push tun-ipv6push &quot;route-ipv6 2000::/3&quot;push &quot;redirect-gateway ipv6&quot;&#x27; &gt;&gt; /etc/openvpn/server.conf\tfi\tif [[ $COMPRESSION_ENABLED == &quot;y&quot;  ]]; then\t\techo &quot;compress $COMPRESSION_ALG&quot; &gt;&gt; /etc/openvpn/server.conf\tfi\tif [[ $DH_TYPE == &quot;1&quot; ]]; then\t\techo &quot;dh none&quot; &gt;&gt; /etc/openvpn/server.conf\t\techo &quot;ecdh-curve $DH_CURVE&quot; &gt;&gt; /etc/openvpn/server.conf\telif [[ $DH_TYPE == &quot;2&quot; ]]; then\t\techo &quot;dh dh.pem&quot; &gt;&gt; /etc/openvpn/server.conf\tfi\tcase $TLS_SIG in\t\t1)\t\t\techo &quot;tls-crypt tls-crypt.key 0&quot; &gt;&gt; /etc/openvpn/server.conf\t\t;;\t\t2)\t\t\techo &quot;tls-auth tls-auth.key 0&quot; &gt;&gt; /etc/openvpn/server.conf\t\t;;\tesac\techo &quot;crl-verify crl.pemca ca.crtcert $SERVER_NAME.crtkey $SERVER_NAME.key auth $HMAC_ALGcipher $CIPHERncp-ciphers $CIPHERtls-servertls-version-min 1.2tls-cipher $CC_CIPHERstatus /var/log/openvpn/status.logverb 3&quot; &gt;&gt; /etc/openvpn/server.conf\t# Create log dir\tmkdir -p /var/log/openvpn\t# Enable routing\techo &#x27;net.ipv4.ip_forward=1&#x27; &gt;&gt; /etc/sysctl.d/20-openvpn.conf\tif [[ &quot;$IPV6_SUPPORT&quot; = &#x27;y&#x27; ]]; then\t\techo &#x27;net.ipv6.conf.all.forwarding=1&#x27; &gt;&gt; /etc/sysctl.d/20-openvpn.conf\tfi\t# Avoid an unneeded reboot\tsysctl --system\t# If SELinux is enabled and a custom port was selected, we need this\tif hash sestatus 2&gt;/dev/null; then\t\tif sestatus | grep &quot;Current mode&quot; | grep -qs &quot;enforcing&quot;; then\t\t\tif [[ &quot;$PORT&quot; != &#x27;1194&#x27; ]]; then\t\t\t\tsemanage port -a -t openvpn_port_t -p &quot;$PROTOCOL&quot; &quot;$PORT&quot;\t\t\tfi\t\tfi\tfi\t# Finally, restart and enable OpenVPN\tif [[ &quot;$OS&quot; = &#x27;arch&#x27; || &quot;$OS&quot; = &#x27;fedora&#x27; ]]; then\t\t# Don&#x27;t modify package-provided service\t\tcp /usr/lib/systemd/system/openvpn-server@.service /etc/systemd/system/openvpn-server@.service\t\t# Workaround to fix OpenVPN service on OpenVZ\t\tsed -i &#x27;s|LimitNPROC|#LimitNPROC|&#x27; /etc/systemd/system/openvpn-server@.service\t\t# Another workaround to keep using /etc/openvpn/\t\tsed -i &#x27;s|/etc/openvpn/server|/etc/openvpn|&#x27; /etc/systemd/system/openvpn-server@.service\t\t# On fedora, the service hardcodes the ciphers. We want to manage the cipher ourselves, so we remove it from the service\t\tif [[ &quot;$OS&quot; == &quot;fedora&quot; ]];then\t\t\tsed -i &#x27;s|--cipher AES-256-GCM --ncp-ciphers AES-256-GCM:AES-128-GCM:AES-256-CBC:AES-128-CBC:BF-CBC||&#x27; /etc/systemd/system/openvpn-server@.service\t\tfi\t\tsystemctl daemon-reload\t\tsystemctl restart openvpn-server@server\t\tsystemctl enable openvpn-server@server\telif [[ &quot;$OS&quot; == &quot;ubuntu&quot; ]] &amp;&amp; [[ &quot;$VERSION_ID&quot; == &quot;16.04&quot; ]]; then\t\t# On Ubuntu 16.04, we use the package from the OpenVPN repo\t\t# This package uses a sysvinit service\t\tsystemctl enable openvpn\t\tsystemctl start openvpn\telse\t\t# Don&#x27;t modify package-provided service\t\tcp /lib/systemd/system/openvpn\\@.service /etc/systemd/system/openvpn\\@.service\t\t# Workaround to fix OpenVPN service on OpenVZ\t\tsed -i &#x27;s|LimitNPROC|#LimitNPROC|&#x27; /etc/systemd/system/openvpn\\@.service\t\t# Another workaround to keep using /etc/openvpn/\t\tsed -i &#x27;s|/etc/openvpn/server|/etc/openvpn|&#x27; /etc/systemd/system/openvpn\\@.service\t\tsystemctl daemon-reload\t\tsystemctl restart openvpn@server\t\tsystemctl enable openvpn@server\tfi\tif [[ $DNS == 2 ]];then\t\tinstallUnbound\tfi\t# Add iptables rules in two scripts\tmkdir /etc/iptables\t# Script to add rules\techo &quot;#!/bin/shiptables -t nat -A POSTROUTING -s 10.8.0.0/24 -o $NIC -j MASQUERADEiptables -A INPUT -i tun0 -j ACCEPTiptables -A FORWARD -i $NIC -o tun0 -j ACCEPTiptables -A FORWARD -i tun0 -o $NIC -j ACCEPTiptables -A INPUT -i $NIC -p $PROTOCOL --dport $PORT -j ACCEPT&quot; &gt; /etc/iptables/add-openvpn-rules.sh\tif [[ &quot;$IPV6_SUPPORT&quot; = &#x27;y&#x27; ]]; then\t\techo &quot;ip6tables -t nat -A POSTROUTING -s fd42:42:42:42::/112 -o $NIC -j MASQUERADEip6tables -A INPUT -i tun0 -j ACCEPTip6tables -A FORWARD -i $NIC -o tun0 -j ACCEPTip6tables -A FORWARD -i tun0 -o $NIC -j ACCEPT&quot; &gt;&gt; /etc/iptables/add-openvpn-rules.sh\tfi\t# Script to remove rules\techo &quot;#!/bin/shiptables -t nat -D POSTROUTING -s 10.8.0.0/24 -o $NIC -j MASQUERADEiptables -D INPUT -i tun0 -j ACCEPTiptables -D FORWARD -i $NIC -o tun0 -j ACCEPTiptables -D FORWARD -i tun0 -o $NIC -j ACCEPTiptables -D INPUT -i $NIC -p $PROTOCOL --dport $PORT -j ACCEPT&quot; &gt; /etc/iptables/rm-openvpn-rules.sh\tif [[ &quot;$IPV6_SUPPORT&quot; = &#x27;y&#x27; ]]; then\t\techo &quot;ip6tables -t nat -D POSTROUTING -s fd42:42:42:42::/112 -o $NIC -j MASQUERADEip6tables -D INPUT -i tun0 -j ACCEPTip6tables -D FORWARD -i $NIC -o tun0 -j ACCEPTip6tables -D FORWARD -i tun0 -o $NIC -j ACCEPT&quot; &gt;&gt; /etc/iptables/rm-openvpn-rules.sh\tfi\tchmod +x /etc/iptables/add-openvpn-rules.sh\tchmod +x /etc/iptables/rm-openvpn-rules.sh\t# Handle the rules via a systemd script\techo &quot;[Unit]Description=iptables rules for OpenVPNBefore=network-online.targetWants=network-online.target[Service]Type=oneshotExecStart=/etc/iptables/add-openvpn-rules.shExecStop=/etc/iptables/rm-openvpn-rules.shRemainAfterExit=yes[Install]WantedBy=multi-user.target&quot; &gt; /etc/systemd/system/iptables-openvpn.service\t# Enable service and apply rules\tsystemctl daemon-reload\tsystemctl enable iptables-openvpn\tsystemctl start iptables-openvpn\t# If the server is behind a NAT, use the correct IP address for the clients to connect to\tif [[ &quot;$PUBLICIP&quot; != &quot;&quot; ]]; then\t\tIP=$PUBLICIP\tfi\t# client-template.txt is created so we have a template to add further users later\techo &quot;client&quot; &gt; /etc/openvpn/client-template.txt\tif [[ &quot;$PROTOCOL&quot; = &#x27;udp&#x27; ]]; then\t\techo &quot;proto udp&quot; &gt;&gt; /etc/openvpn/client-template.txt\telif [[ &quot;$PROTOCOL&quot; = &#x27;tcp&#x27; ]]; then\t\techo &quot;proto tcp-client&quot; &gt;&gt; /etc/openvpn/client-template.txt\tfi\techo &quot;remote $IP $PORTdev tunresolv-retry infinitenobindpersist-keypersist-tunremote-cert-tls serververify-x509-name $SERVER_NAME nameauth $HMAC_ALGauth-nocachecipher $CIPHERtls-clienttls-version-min 1.2tls-cipher $CC_CIPHERsetenv opt block-outside-dns # Prevent Windows 10 DNS leakverb 3&quot; &gt;&gt; /etc/openvpn/client-template.txtif [[ $COMPRESSION_ENABLED == &quot;y&quot;  ]]; then\techo &quot;compress $COMPRESSION_ALG&quot; &gt;&gt; /etc/openvpn/client-template.txtfi\t# Generate the custom client.ovpn\tnewClient\techo &quot;å¦‚æœè¦æ·»åŠ æ›´å¤šå®¢æˆ·ç«¯ï¼Œåªéœ€å†æ¬¡è¿è¡Œæ­¤è„šæœ¬å³å¯&quot;&#125;function newClient () &#123;\techo &quot;&quot;\techo &quot;è¾“å…¥ç”¨æˆ·çš„ç”¨æˆ·å.&quot;\techo &quot;è¯·ä¸è¦è¾“å…¥ç‰¹æ®Šå­—ç¬¦.&quot;\tuntil [[ &quot;$CLIENT&quot; =~ ^[a-zA-Z0-9_]+$ ]]; do\t\tread -rp &quot;ç”¨æˆ·å: &quot; -e CLIENT\tdone\techo &quot;&quot;\techo &quot;æ˜¯å¦è¦ä½¿ç”¨å¯†ç è®¤è¯é…ç½®æ–‡ä»¶?&quot;\techo &quot;(e.g. ä½¿ç”¨å¯†ç åŠ å¯†ç§é’¥)&quot;\techo &quot;   1) æ·»åŠ ä¸€ä¸ªä¸éœ€è¦å¯†ç çš„ç”¨æˆ·&quot;\techo &quot;   2) æ·»åŠ ä¸€ä¸ªéœ€è¦å¯†ç çš„ç”¨æˆ·&quot;\tuntil [[ &quot;$PASS&quot; =~ ^[1-2]$ ]]; do\t\tread -rp &quot;Select an option [1-2]: &quot; -e -i 1 PASS\tdone\tcd /etc/openvpn/easy-rsa/ || return\tcase $PASS in\t\t1)\t\t\t./easyrsa build-client-full &quot;$CLIENT&quot; nopass\t\t;;\t\t2)\t\techo &quot;âš ï¸ æ‚¨å°†è¢«è¦æ±‚æä¾›ç”¨æˆ·çš„å¯†ç  âš ï¸&quot;\t\t\t./easyrsa build-client-full &quot;$CLIENT&quot;\t\t;;\tesac\t# Home directory of the user, where the client configuration (.ovpn) will be written\tif [ -e &quot;/home/$CLIENT&quot; ]; then  # if $1 is a user name\t\thomeDir=&quot;/home/$CLIENT&quot;\telif [ &quot;$&#123;SUDO_USER&#125;&quot; ]; then   # if not, use SUDO_USER\t\thomeDir=&quot;/home/$&#123;SUDO_USER&#125;&quot;\telse  # if not SUDO_USER, use /root\t\thomeDir=&quot;/root&quot;\tfi\t# Determine if we use tls-auth or tls-crypt\tif grep -qs &quot;^tls-crypt&quot; /etc/openvpn/server.conf; then\t\tTLS_SIG=&quot;1&quot;\telif grep -qs &quot;^tls-auth&quot; /etc/openvpn/server.conf; then\t\tTLS_SIG=&quot;2&quot;\tfi\t# Generates the custom client.ovpn\tcp /etc/openvpn/client-template.txt &quot;$homeDir/$CLIENT.ovpn&quot;\t&#123;\t\techo &quot;&lt;ca&gt;&quot;\t\tcat &quot;/etc/openvpn/easy-rsa/pki/ca.crt&quot;\t\techo &quot;&lt;/ca&gt;&quot;\t\techo &quot;&lt;cert&gt;&quot;\t\tawk &#x27;/BEGIN/,/END/&#x27; &quot;/etc/openvpn/easy-rsa/pki/issued/$CLIENT.crt&quot;\t\techo &quot;&lt;/cert&gt;&quot;\t\techo &quot;&lt;key&gt;&quot;\t\tcat &quot;/etc/openvpn/easy-rsa/pki/private/$CLIENT.key&quot;\t\techo &quot;&lt;/key&gt;&quot;\t\tcase $TLS_SIG in\t\t\t1)\t\t\t\techo &quot;&lt;tls-crypt&gt;&quot;\t\t\t\tcat /etc/openvpn/tls-crypt.key\t\t\t\techo &quot;&lt;/tls-crypt&gt;&quot;\t\t\t;;\t\t\t2)\t\t\t\techo &quot;key-direction 1&quot;\t\t\t\techo &quot;&lt;tls-auth&gt;&quot;\t\t\t\tcat /etc/openvpn/tls-auth.key\t\t\t\techo &quot;&lt;/tls-auth&gt;&quot;\t\t\t;;\t\tesac\t&#125; &gt;&gt; &quot;$homeDir/$CLIENT.ovpn&quot;\techo &quot;&quot;\techo &quot;Client $CLIENT added, the configuration file is available at $homeDir/$CLIENT.ovpn.&quot;\techo &quot;ä¸‹è½½ .ovpn é…ç½®æ–‡ä»¶å¹¶ä¸”å¯¼å…¥åˆ°ä½ çš„OpenVPNå®¢æˆ·ç«¯.&quot;&#125;function revokeClient () &#123;\tNUMBEROFCLIENTS=$(tail -n +2 /etc/openvpn/easy-rsa/pki/index.txt | grep -c &quot;^V&quot;)\tif [[ &quot;$NUMBEROFCLIENTS&quot; = &#x27;0&#x27; ]]; then\t\techo &quot;&quot;\t\techo &quot;å½“å‰æ²¡æœ‰ç”¨æˆ·!&quot;\t\texit 1\tfi\techo &quot;&quot;\techo &quot;Select the existing client certificate you want to revoke&quot;\ttail -n +2 /etc/openvpn/easy-rsa/pki/index.txt | grep &quot;^V&quot; | cut -d &#x27;=&#x27; -f 2 | nl -s &#x27;) &#x27;\tif [[ &quot;$NUMBEROFCLIENTS&quot; = &#x27;1&#x27; ]]; then\t\tread -rp &quot;é€‰æ‹©ä¸€ä¸ªç”¨æˆ· [1]: &quot; CLIENTNUMBER\telse\t\tread -rp &quot;é€‰æ‹©ä¸€ä¸ªç”¨æˆ· [1-$NUMBEROFCLIENTS]: &quot; CLIENTNUMBER\tfi\tCLIENT=$(tail -n +2 /etc/openvpn/easy-rsa/pki/index.txt | grep &quot;^V&quot; | cut -d &#x27;=&#x27; -f 2 | sed -n &quot;$CLIENTNUMBER&quot;p)\tcd /etc/openvpn/easy-rsa/\t./easyrsa --batch revoke &quot;$CLIENT&quot;\tEASYRSA_CRL_DAYS=3650 ./easyrsa gen-crl\t# Cleanup\trm -f &quot;pki/reqs/$CLIENT.req&quot;\trm -f &quot;pki/private/$CLIENT.key&quot;\trm -f &quot;pki/issued/$CLIENT.crt&quot;\trm -f /etc/openvpn/crl.pem\tcp /etc/openvpn/easy-rsa/pki/crl.pem /etc/openvpn/crl.pem\tchmod 644 /etc/openvpn/crl.pem\tfind /home/ -maxdepth 2 -name &quot;$CLIENT.ovpn&quot; -delete\trm -f &quot;/root/$CLIENT.ovpn&quot;\tsed -i &quot;s|^$CLIENT,.*||&quot; /etc/openvpn/ipp.txt\techo &quot;&quot;\techo &quot;å®¢æˆ·ç«¯è¯ä¹¦ $CLIENT å·²ç»ç§»é™¤.&quot;&#125;function removeUnbound () &#123;\t# Remove OpenVPN-related config\tsed -i &#x27;s|include: \\/etc\\/unbound\\/openvpn.conf||&#x27; /etc/unbound/unbound.conf\trm /etc/unbound/openvpn.conf\tsystemctl restart unbound\tuntil [[ $REMOVE_UNBOUND =~ (y|n) ]]; do\t\techo &quot;&quot;\t\techo &quot;å¦‚æœæ‚¨åœ¨å®‰è£…OpenVPNä¹‹å‰å·²ç»ä½¿ç”¨äº†Unboundï¼Œæˆ‘åˆ é™¤äº†ä¸OpenVPNç›¸å…³çš„é…ç½®.&quot;\t\tread -rp &quot;ç¡®å®šå®Œå…¨åˆ é™¤ Unbound? [y/n]: &quot; -e REMOVE_UNBOUND\tdone\tif [[ &quot;$REMOVE_UNBOUND&quot; = &#x27;y&#x27; ]]; then\t\t# Stop Unbound\t\tsystemctl stop unbound\t\tif [[ &quot;$OS&quot; =~ (debian|ubuntu) ]]; then\t\t\tapt-get autoremove --purge -y unbound\t\telif [[ &quot;$OS&quot; = &#x27;arch&#x27; ]]; then\t\t\tpacman --noconfirm -R unbound\t\telif [[ &quot;$OS&quot; = &#x27;centos&#x27; ]]; then\t\t\tyum remove -y unbound\t\telif [[ &quot;$OS&quot; = &#x27;fedora&#x27; ]]; then\t\t\tdnf remove -y unbound\t\tfi\t\trm -rf /etc/unbound/\t\techo &quot;&quot;\t\techo &quot;Unbound åˆ é™¤æˆåŠŸ!&quot;\telse\t\techo &quot;&quot;\t\techo &quot;Unbound åˆ é™¤ç»ˆæ­¢.&quot;\tfi&#125;function removeOpenVPN () &#123;\techo &quot;&quot;\tread -rp &quot;ç¡®å®šè¦å¸è½½OpenVPN? [y/n]: &quot; -e -i n REMOVE\tif [[ &quot;$REMOVE&quot; = &#x27;y&#x27; ]]; then\t\t# Get OpenVPN port from the configuration\t\tPORT=$(grep &#x27;^port &#x27; /etc/openvpn/server.conf | cut -d &quot; &quot; -f 2)\t\t# Stop OpenVPN\t\tif [[ &quot;$OS&quot; =~ (fedora|arch) ]]; then\t\t\tsystemctl disable openvpn-server@server\t\t\tsystemctl stop openvpn-server@server\t\t\t# Remove customised service\t\t\trm /etc/systemd/system/openvpn-server@.service\t\telif [[ &quot;$OS&quot; == &quot;ubuntu&quot; ]] &amp;&amp; [[ &quot;$VERSION_ID&quot; == &quot;16.04&quot; ]]; then\t\t\tsystemctl disable openvpn\t\t\tsystemctl stop openvpn\t\telse\t\t\tsystemctl disable openvpn@server\t\t\tsystemctl stop openvpn@server\t\t\t# Remove customised service\t\t\trm /etc/systemd/system/openvpn\\@.service\t\tfi\t\t# Remove the iptables rules related to the script\t\tsystemctl stop iptables-openvpn\t\t# Cleanup\t\tsystemctl disable iptables-openvpn\t\trm /etc/systemd/system/iptables-openvpn.service\t\tsystemctl daemon-reload\t\trm /etc/iptables/add-openvpn-rules.sh\t\trm /etc/iptables/rm-openvpn-rules.sh\t\t# SELinux\t\tif hash sestatus 2&gt;/dev/null; then\t\t\tif sestatus | grep &quot;Current mode&quot; | grep -qs &quot;enforcing&quot;; then\t\t\t\tif [[ &quot;$PORT&quot; != &#x27;1194&#x27; ]]; then\t\t\t\t\tsemanage port -d -t openvpn_port_t -p udp &quot;$PORT&quot;\t\t\t\tfi\t\t\tfi\t\tfi\t\tif [[ &quot;$OS&quot; =~ (debian|ubuntu) ]]; then\t\t\tapt-get autoremove --purge -y openvpn\t\t\tif [[ -e /etc/apt/sources.list.d/openvpn.list ]];then\t\t\t\trm /etc/apt/sources.list.d/openvpn.list\t\t\t\tapt-get update\t\t\tfi\t\telif [[ &quot;$OS&quot; = &#x27;arch&#x27; ]]; then\t\t\tpacman --noconfirm -R openvpn\t\telif [[ &quot;$OS&quot; = &#x27;centos&#x27; ]]; then\t\t\tyum remove -y openvpn\t\telif [[ &quot;$OS&quot; = &#x27;fedora&#x27; ]]; then\t\t\tdnf remove -y openvpn\t\tfi\t\t# Cleanup\t\tfind /home/ -maxdepth 2 -name &quot;*.ovpn&quot; -delete\t\tfind /root/ -maxdepth 1 -name &quot;*.ovpn&quot; -delete\t\trm -rf /etc/openvpn\t\trm -rf /usr/share/doc/openvpn*\t\trm -f /etc/sysctl.d/20-openvpn.conf\t\trm -rf /var/log/openvpn\t\t# Unbound\t\tif [[ -e /etc/unbound/openvpn.conf ]]; then\t\t\tremoveUnbound\t\tfi\t\techo &quot;&quot;\t\techo &quot;OpenVPN å¸è½½æˆåŠŸ!&quot;\telse\t\techo &quot;&quot;\t\techo &quot;å¸è½½ç»ˆæ­¢!&quot;\tfi&#125;function manageMenu () &#123;\tclear\techo &quot;æ¬¢è¿ä½¿ç”¨OpenVPNä¸€é”®è„šæœ¬!&quot;\techo &quot;è„šæœ¬åŸä½œè€…: https://github.com/angristan/openvpn-install&quot;\techo &quot;è„šæœ¬æ±‰åŒ–: pingchuan&quot;\techo &quot;&quot;\techo &quot;OpenVPN å·²ç»æ­£å¸¸å®‰è£….&quot;\techo &quot;&quot;\techo &quot;è¯·é€‰æ‹©ä½ è¦è¿›è¡Œçš„æ“ä½œ?&quot;\techo &quot;   1) æ·»åŠ ä¸€ä¸ªç”¨æˆ·&quot;\techo &quot;   2) åˆ é™¤ä¸€ä¸ªå­˜åœ¨çš„ç”¨æˆ·&quot;\techo &quot;   3) å¸è½½OpenVPN&quot;\techo &quot;   4) é€€å‡º&quot;\tuntil [[ &quot;$MENU_OPTION&quot; =~ ^[1-4]$ ]]; do\t\tread -rp &quot;é€‰æ‹©é€‰é¡¹ [1-4]: &quot; MENU_OPTION\tdone\tcase $MENU_OPTION in\t\t1)\t\t\tnewClient\t\t;;\t\t2)\t\t\trevokeClient\t\t;;\t\t3)\t\t\tremoveOpenVPN\t\t;;\t\t4)\t\t\texit 0\t\t;;\tesac&#125;# Check for root, TUN, OS...initialCheck# Check if OpenVPN is already installedif [[ -e /etc/openvpn/server.conf ]]; then\tmanageMenuelse\tinstallOpenVPNfi\n","slug":"æ­å»ºOpenVPNä¸€é”®è„šæœ¬","date":"2024-09-30T05:39:32.999Z","categories_index":"ç½‘ç»œ","tags_index":"OpenVPN,å¼€æº,Linux","author_index":"Chuan"},{"id":"37eadf13cf8e6f83452d28040d5362dd","title":"åœ¨ç¦é£Ÿä¸­æ“ç»ƒæˆé•¿","content":"\n\n\n\n\n\n\n\n\næ‰æ ¹åŸºç£ï¼Œå‘ä¸Šæˆé•¿ï¼Œè¿™é‡Œæ˜¯ã€Šæˆä¸»å­¦å ‚ã€‹ã€‚æˆ‘æ˜¯å¼ å‡¡ï¼åœ¨æˆ‘æ—¥å¸¸çš„å·¥ä½œä¸­ï¼Œä¼šæœ‰ä¸€äº›ä¸åŒçš„ä»»åŠ¡å’Œäº‹åŠ¡éœ€è¦å¤„ç†ï¼Œä½†æ˜¯æˆ‘éå¸¸äº«å—çš„ä¸€ä»¶å°±æ˜¯å®‰å®‰é™é™çš„é˜…è¯»å¤§å®¶çš„æ¥ä¿¡ï¼Œæ— è®ºæ˜¯çŸ­ä¿¡è¿˜æ˜¯ç”µé‚®ã€‚å¾ˆå¤šæ¥ä¿¡æˆ‘ä¼šå§”æ‰˜ç»™æˆ‘çš„åŒå·¥æ¥è¿›è¡Œå›å¤ï¼Œä½†æ˜¯æˆ‘ä¼šè®¤çœŸåœ°é˜…è¯»æ¯ä¸€å°æ¥ä¿¡ï¼Œé€è¿‡è¿™äº›æ¥ä¿¡æ‹‰è¿›äº†æˆ‘å’Œä½ ä¹‹é—´çš„è·ç¦»ï¼Œè®©æˆ‘çŸ¥é“è¿™äº›è¯¾ç¨‹æ˜¯æœ‰äººå¬çš„ï¼Œè€Œä¸”æ˜¯éå¸¸è®¤çœŸåœ°åœ¨å¬ï¼Œè¿™å¯¹æˆ‘æ—¢æ˜¯é¼“åŠ±ï¼Œä¹Ÿæ˜¯é­ç­–ã€‚ç›¼æœ›æˆ‘ä»¬å¯ä»¥é€è¿‡è¿™äº›è¯¾ç¨‹ä¸€èµ·æ¥å­¦ä¹ ï¼Œä¹Ÿä¸€èµ·æˆé•¿ã€‚å¦‚æœä½ æœ‰ä»€ä¹ˆä»£ç¥·äº‹é¡¹ï¼Œä½ ä¹Ÿå¯ä»¥æ¥ä¿¡è®©æˆ‘çŸ¥é“ï¼Œæˆ‘ä»¬ä¸€èµ·ä¸ºä½ ç¥·å‘Šï¼Œç›¼æœ›æˆ‘ä»¬ä¹‹é—´çš„è¿æ¥é€è¿‡å¹¿æ’­å¯ä»¥ç»§ç»­å»¶å±•ã€‚è¿‘æœŸæˆ‘ä»¬ä¸€ç›´åœ¨å­¦ä¹ çš„è¯¾ç¨‹æ˜¯â€œæˆé•¿æˆç†Ÿâ€ï¼Œç›®çš„æ˜¯é€è¿‡ä¸€äº›å®é™…çš„æ“ç»ƒï¼Œå¸®åŠ©æˆ‘ä»¬çš„å±çµç”Ÿå‘½èƒ½ä¸æ–­æˆé•¿ï¼Œä¸”æ—¥æ¸æˆç†Ÿã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬æ¥åˆ°è¿™ä¸ªè¯¾ç¨‹çš„ç¬¬7è®²â”€â”€åœ¨ç¦é£Ÿä¸­æ“ç»ƒæˆé•¿ã€‚è¯´åˆ°ç¦é£Ÿï¼Œç›¸ä¿¡æ¯ä¸€ä½åŸºç£å¾’éƒ½éå¸¸ç†Ÿæ‚‰äº†ã€‚å…¶å®ç¦é£Ÿæœ‰ä¸¤å±‚å«ä¹‰ã€‚é¦–å…ˆæ˜¯å¹¿ä¹‰ä¸Šçš„â€œç¦é£Ÿâ€ï¼Œä¹Ÿå°±æ˜¯æ¸…æ•™å¾’ç¥å­¦å®¶é’Ÿé©¬ç”°æ‰€è¯´çš„â€œç¦é£Ÿâ€ï¼Œæ˜¯æŒ‡â€œåœæ­¢æŸä¸ªæ­£å½“çš„åšæ³•ï¼Œä¸ºäº†æˆå°±å±çµçš„ç›®çš„â€ã€‚å®ƒå¯ä»¥åŒ…æ‹¬é¥®é£Ÿï¼Œä½†ä¸å±€é™äºé¥®é£Ÿï¼Œä¹Ÿå°±æ˜¯è¯´ä¸ºäº†å±çµçš„ç›®çš„ï¼Œæˆ‘ä»¬åœæ­¢æŸä¸ªå¯èƒ½å®¹æ˜“å¹²æ‰°æˆ‘ä»¬çš„äº‹åŠ¡ã€‚ä»è¿™ä¸ªè§’åº¦æ¥è¯´ï¼Œæˆ‘ä»¬å¯ä»¥â€œç¦é£Ÿâ€ï¼Œä¹Ÿå¯ä»¥æ˜¯â€œç¦ç”µè§†â€ã€â€œç¦ç½‘ç»œâ€ã€â€œç¦æ‰‹æœºâ€ç­‰ç­‰ã€‚å¥½è®©æˆ‘ä»¬èƒ½å®‰å¿ƒäº²è¿‘ä¸»ã€‚å¦å¤–ä¸€å±‚å°±æ˜¯æ›´ç‹­ä¹‰çš„å®šä¹‰ï¼šä¸ºäº†å±çµçš„ç›®çš„è€Œè‡ªæ„¿åœ°åœæ­¢æ‘„å–é£Ÿç‰©â”€â”€åŒ…æ‹¬é£Ÿç‰©å’Œé¥®æ–™ã€‚æˆ‘ä»¬ä»Šå¤©çš„è¯¾ç¨‹ä¸»è¦æ¢è®¨çš„æ˜¯è¿™ç§ç±»å‹çš„ç¦é£Ÿï¼Œåœ£ç»æ‰€æè¿°çš„ä¹Ÿæ˜¯è¿™ç§ç±»å‹çš„ã€ç‹­ä¹‰çš„ç¦é£Ÿã€‚\n\n\n\n\n\n\n\n\n\nå…¶å®åœ¨åœ£ç»æ—§çº¦ä¸­å……æ»¡äº†å…³äºç¦é£Ÿçš„è®°è½½ï¼Œæœ‰é›†ä½“çš„ç¦é£Ÿï¼Œä¹Ÿæœ‰ä¸ªäººçš„ç¦é£Ÿã€‚æˆ–è€…ä¸ºäº†è¡¨è¾¾æ‚²ä¼¤ï¼Œæˆ–ä¸ºäº†è¡¨è¾¾è°¦å‘ï¼Œæœ‰æ—¶å€™ä¹Ÿä¸ºäº†è¡¨è¾¾è®¤ç½ªã€‚æ’’æ¯è€³è®°ä¸‹1:12å¤§å«å°±æ’•è£‚è¡£æœï¼Œè·Ÿéšä»–çš„äººä¹Ÿæ˜¯å¦‚æ­¤ï¼Œè€Œä¸”æ‚²å“€å“­å·ï¼Œç¦é£Ÿåˆ°æ™šä¸Šï¼Œæ˜¯å› æ‰«ç½—å’Œä»–å„¿å­çº¦æ‹¿å•ï¼Œå¹¶è€¶å’Œåçš„æ°‘ä»¥è‰²åˆ—å®¶çš„äººï¼Œå€’åœ¨åˆ€ä¸‹ã€‚åœ¨ä»¥æ–¯æ‹‰è®°8:21ï¼šâ€œé‚£æ—¶ï¼Œæˆ‘åœ¨äºšå“ˆç“¦æ²³è¾¹å®£å‘Šç¦é£Ÿï¼Œä¸ºè¦åœ¨æˆ‘ä»¬ç¥é¢å‰å…‹è‹¦å·±å¿ƒï¼Œæ±‚ä»–ä½¿æˆ‘ä»¬å’Œå¦‡äººå­©å­ï¼Œå¹¶ä¸€åˆ‡æ‰€æœ‰çš„ï¼Œéƒ½å¾—å¹³å¦çš„é“è·¯ã€‚â€æˆ‘ç›¼æœ›å¤§å®¶è¯»è¿™äº›ç»æ–‡çš„æ—¶å€™ä¸è¦ä¸€å¸¦è€Œè¿‡ï¼Œè€Œæ˜¯è®¤çœŸå»è¯»ã€‚å½“æ¥åˆ°æ–°çº¦çš„æ—¶å€™ï¼Œåœ£ç»ä¹Ÿå……æ»¡äº†å…³äºç¦é£Ÿçš„è®°è½½ã€‚é™¤äº†å¾ˆå¤šä»¥è‰²åˆ—äººåœ¨å®è·µæ—§çº¦ä¸­åŒ…æ‹¬ç¦é£Ÿåœ¨å†…çš„å±çµæ“ç»ƒå¤–ï¼Œæˆ‘ä»¬çœ‹åˆ°è€¶ç¨£è‡ªå·±ä¹Ÿç¦é£Ÿã€‚é©¬å¤ªç¦éŸ³4:1-2ï¼šâ€œå½“æ—¶ï¼Œè€¶ç¨£è¢«åœ£çµå¼•åˆ°æ—·é‡ï¼Œå—é­”é¬¼çš„è¯•æ¢ã€‚ä»–ç¦é£Ÿå››åæ˜¼å¤œï¼Œåæ¥å°±é¥¿äº†ã€‚â€è€¶ç¨£ä¸ä½†è‡ªå·±ç¦é£Ÿï¼Œä»–ä¹Ÿæ•™å¯¼ä»–çš„é—¨å¾’è¯¥æ€æ ·ç¦é£Ÿã€‚åœ¨ä½¿å¾’è¡Œä¼ ä¸­ï¼Œæ•™ä¼šé¢†è¢–ä»¬åœ¨é€‰ç«‹å®£æ•™å£«å’Œé•¿è€çš„æ—¶å€™ï¼Œå…ˆç¦é£Ÿç¥·å‘Šã€‚ä¿ç½—ä¹Ÿåœ¨ä»–çš„ä¹¦ä¿¡ä¸­å¤šæ¬¡æåˆ°ç¦é£Ÿã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å®Œå…¨æœ‰ç†ç”±ç›¸ä¿¡ï¼Œç¦é£Ÿæ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„å±çµæ“ç»ƒã€‚é‚£ä¹ˆä½œä¸ºä»Šå¤©çš„æˆ‘ä»¬ï¼Œå½“æˆ‘ä»¬è®²åˆ°ç¦é£Ÿçš„æ—¶å€™ï¼Œç¦é£ŸåŒ…æ‹¬å“ªäº›è¦ç´ å‘¢ï¼Ÿ\nç¦é£ŸåŒ…æ‹¬ä»€ä¹ˆ\næˆ‘ä»¬å¯ä»¥ç®€å•çœ‹ä¸€ä¸‹ï¼Œåœ¨åœ£ç»ä¸­ï¼Œç¦é£ŸåŒ…æ‹¬äº†å››ä¸ªè¦ç´ ï¼šæ”¾å¼ƒä»€ä¹ˆå’Œæ”¾å¼ƒå¤šå°‘ã€è°å‚åŠ ç¦é£Ÿã€ç¦é£Ÿçš„æ—¶é—´ï¼Œä»¥åŠç¦é£Ÿçš„é¢‘ç‡ã€‚æ”¾å¼ƒä»€ä¹ˆå’Œæ”¾å¼ƒå¤šå°‘ä¹Ÿå°±æ˜¯ç¦é£Ÿçš„å†…å®¹å’Œç¨‹åº¦ã€‚æˆ‘ä»¬å¯ä»¥ä¸åŒçš„ç¨‹åº¦æ¥æ”¾å¼ƒé¥®é£Ÿã€‚å¸¸è§„çš„ç¦é£Ÿå°±æ˜¯æ”¾å¼ƒæ‰€æœ‰çš„é¥®é£Ÿï¼Œä¸åƒä¹Ÿä¸å–ã€‚ä½†æ˜¯éƒ¨åˆ†çš„ç¦é£Ÿæ˜¯æŒ‡æœ‰é™åœ°æ‘„å–é¥®é£Ÿï¼Œä¸æ˜¯ä»€ä¹ˆéƒ½ä¸åƒã€‚è€Œæ˜¯éå¸¸æœ‰é™åœ°æ‘„å–ç®€å•å’ŒåŸºæœ¬çš„é¥®é£Ÿã€‚é‚£è°æ¥ç¦é£Ÿå‘¢ï¼Œä¹Ÿå°±æ˜¯ç¦é£Ÿçš„å‚ä¸è€…ã€‚é€šå¸¸æƒ…å†µä¸‹æ˜¯ä¸ªäººçš„ç¦é£Ÿã€‚å½“è€¶ç¨£åœ¨æ•™å¯¼ç™»å±±å®è®­æ—¶ï¼Œä»–æ‰€è¯´çš„ç¦é£Ÿå°±æ˜¯ä¸ªäººçš„ç¦é£Ÿã€‚è€¶ç¨£æŒ‡å‡ºï¼Œè¿™æ ·çš„ç¦é£Ÿä¸åº”å½“æ˜¯åšç»™åˆ«äººçœ‹çš„ã€‚åœ¨é©¬å¤ªç¦éŸ³6:17-18ï¼šâ€œä½ ç¦é£Ÿçš„æ—¶å€™ï¼Œè¦æ¢³å¤´æ´—è„¸ï¼Œä¸è¦å«äººçœ‹å‡ºä½ ç¦é£Ÿæ¥ï¼Œåªå«ä½ æš—ä¸­çš„çˆ¶çœ‹è§ï¼›ä½ çˆ¶åœ¨æš—ä¸­å¯Ÿçœ‹ï¼Œå¿…ç„¶æŠ¥ç­”ä½ ã€‚â€é™¤äº†ä¸ªäººæ“ç»ƒç¦é£Ÿå¤–ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯å°ç»„ç¦é£Ÿï¼Œä¹Ÿå°±æ˜¯è¯´å°èŒƒå›´çš„å›¢å¥‘ï¼Œç”šè‡³æ˜¯ä¼šä¼—ï¼Œæ•´ä¸ªæ•™ä¼šä¸€èµ·æ“ç»ƒç¦é£Ÿã€‚è¿™æ˜¯ç¦é£Ÿçš„å‚ä¸è€…ã€‚é‚£ä¹ˆç¦é£Ÿçš„æ—¶é—´é•¿åº¦å‘¢ï¼Ÿåœ£ç»å¹¶æ²¡æœ‰è§„å®šç¦é£Ÿä¸€å®šè¦å¤šä¹…ã€‚åœ£ç»ä¸­çš„ä¾‹å­åŒ…æ‹¬äº†ä¸€å¤©ä¸­çš„éƒ¨åˆ†æ—¶é—´ï¼Œä¸€æ•´å¤©ç¦é£Ÿã€ä¸‰å¤©ç¦é£Ÿã€ä¸ƒå¤©ç¦é£Ÿã€äºŒåä¸€å¤©ç¦é£Ÿï¼Œä»¥åŠå››åå¤©çš„è¶…è‡ªç„¶ç¦é£Ÿã€‚é™¤æ­¤ä»¥å¤–ï¼Œåœ£ç»è¿˜è®°è½½äº†å¾ˆå¤šç¦é£Ÿå´æ²¡æœ‰æè¿°è¿™äº›ç¦é£Ÿçš„é•¿åº¦ã€‚ä¸ä½†ç¦é£Ÿçš„æ—¶é—´é•¿çŸ­ä¸ä¸€ï¼Œç¦é£Ÿçš„é¢‘ç‡ä¹Ÿå„ä¸ç›¸åŒã€‚åœ£ç»ä¸­æœ‰è§„å¾‹çš„ç¦é£Ÿï¼Œæ¯”å¦‚ï¼Œä»¥è‰²åˆ—äººåœ¨èµç½ªæ—¥çš„æ—¶å€™ç¦é£Ÿï¼Œæ³•åˆ©èµ›äººåœ¨è·¯åŠ ç¦éŸ³18:12è¡¨ç¤ºä»–ä»¬æ¯å‘¨æœ‰ä¸¤æ¬¡ç¦é£Ÿã€‚é™¤äº†è§„å¾‹æ€§çš„ç¦é£Ÿä»¥å¤–ï¼Œæœ‰éœ€è¦æ—¶å°±å¯ä»¥ç¦é£Ÿã€‚å½“å‡ºç°æŸç§éœ€è¦æ—¶ï¼Œç¦é£Ÿå°±ä¼šå‘ç”Ÿã€‚åœ£ç»ä¸­æ‰€æè¿°çš„å¤§å¤šæ•°ç¦é£Ÿéƒ½æ˜¯å±äºæ­¤ç±»ã€‚åˆšåˆšæåˆ°ç¦é£Ÿçš„æ—¶é—´é•¿åº¦ã€é¢‘ç‡æ˜¯äº’ç›¸ç‹¬ç«‹çš„ï¼Œä½ å¯ä»¥æ ¹æ®ä½ çš„å®é™…æƒ…å†µé‡‡å–é€‚åˆä½ çš„å¼€å§‹æ“ç»ƒã€‚é‚£æœ‰ä¸€ä¸ªå…³é”®é—®é¢˜æ˜¯ï¼šä»Šå¤©çš„åŸºç£å¾’ä¹Ÿè¦è¿™æ ·ç¦é£Ÿå—ï¼Ÿ\nä»Šå¤©çš„åŸºç£å¾’ä¹Ÿè¦è¿™æ ·ç¦é£Ÿå—ï¼Ÿåœ¨å›ç­”è¿™ä¸ªé—®é¢˜ä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆè¦æ€æƒ³çš„æ˜¯æ–°çº¦åœ£ç»å¦‚ä½•å¯¹å¾…æˆ‘ä»¬æ—¥ç”¨çš„é¥®é£Ÿã€‚åœ¨æ–°çº¦åœ£ç»ä¸­ï¼Œé£Ÿç‰©è¢«çœ‹ä½œæ˜¯ç¥æ‰€èµçš„ç¾å¥½ã€‚é£Ÿç‰©æ˜¯ç¥ç¾å¥½åˆ›é€ çš„ä¸€éƒ¨åˆ†ï¼Œåªè¦æ˜¯å‡ºäºæ„Ÿæ©çš„å¿ƒè€Œé¢†å—ï¼Œå°±æ˜¯å¥½çš„ã€‚ä¿ç½—æ›¾åœ¨ææ‘©å¤ªä¹¦ä¿¡è­¦å‘Šè¯»è€…ä¸€ç§ç¦æ¬²ä¸»ä¹‰ï¼Œè¿™ç§ç¦æ¬²ä¸»ä¹‰äº‹å®ä¸Šæ˜¯å¿½è§†äº†æˆ–æ‰­æ›²äº†ç¥èµç»™æˆ‘ä»¬é£Ÿç‰©è¿™ä¸€äº‹å®ï¼Œè½»çœ‹äº†ç¥çš„è‰¯å–„ã€‚æˆ‘è¦å¼ºè°ƒçš„æ˜¯ï¼ŒåŸºç£å¾’çš„ç¦é£Ÿå¹¶éç¦æ¬²ä¸»ä¹‰ã€‚åœ¨æ­Œç½—è¥¿ä¹¦2:20-23ï¼Œä¿ç½—è­¦å‘Šè¯´è¿™ç§ç¦æ¬²ä¸»ä¹‰æ˜¯ç¾è¾±åŸºç£çš„ï¼Œå› ä¸ºå®ƒå¦è®¤äº†åŸºç£æ•‘èµçš„è¶³å¤Ÿæ€§ï¼Œä¹Ÿå¦è®¤äº†åŸºç£çš„ä½æ ¼å’ŒåŸºç£çš„å·¥ä½œã€‚ä¿ç½—æ˜¯è¿™æ ·è¯´çš„ï¼šâ€œä½ ä»¬è‹¥æ˜¯ä¸åŸºç£åŒæ­»ï¼Œè„±ç¦»äº†ä¸–ä¸Šçš„å°å­¦ï¼Œä¸ºä»€ä¹ˆä»åƒåœ¨ä¸–ä¿—ä¸­æ´»ç€ã€æœä»é‚£â€˜ä¸å¯æ‹¿ã€ä¸å¯å°ã€ä¸å¯æ‘¸â€™ç­‰ç±»çš„è§„æ¡å‘¢ï¼Ÿè¿™éƒ½æ˜¯ç…§äººæ‰€å©å’ã€æ‰€æ•™å¯¼çš„ã€‚è¯´åˆ°è¿™ä¸€åˆ‡ï¼Œæ­£ç”¨çš„æ—¶å€™å°±éƒ½è´¥åäº†ã€‚è¿™äº›è§„æ¡ä½¿äººå¾’æœ‰æ™ºæ…§ä¹‹åï¼Œç”¨ç§æ„å´‡æ‹œï¼Œè‡ªè¡¨è°¦å‘ï¼Œè‹¦å¾…å·±èº«ï¼Œå…¶å®åœ¨å…‹åˆ¶è‚‰ä½“çš„æƒ…æ¬²ä¸Šæ˜¯æ¯«æ— åŠŸæ•ˆã€‚â€æˆ‘ä»¬ä¸è¦ä»¥ä¸ºå°‘åƒæˆ–è€…ä¸åƒä¸œè¥¿ï¼Œå°±èƒ½ç»™äººå¸¦æ¥å±çµç›Šå¤„ã€‚ç¦é£Ÿæ²¡é‚£ä¹ˆç®€å•ã€‚åƒæˆ–è€…ä¸åƒå¹¶ä¸æ˜¯ä¸€ä¸ªå…³ä¹å±çµç”Ÿå‘½çš„æ ¸å¿ƒå†³å®šï¼Œä½†æ˜¯æˆ‘ä»¬çš„åŠ¨æœºå’Œå†³å®šå´èƒ½ä½“ç°æˆ‘ä»¬æ˜¯çˆ±ç¥ã€çŸ¥è¶³ï¼Œè¿˜æ˜¯ä¸çˆ±ç¥å’Œä¸çŸ¥è¶³ã€‚æˆ‘ä»¬æ³¨æ„åˆ°ï¼Œåœ¨æ—§çº¦åœ£ç»ä¸­ç¥æŒ‡å®šè¦åœ¨èµç½ªæ—¥æœ‰å…¨æ°‘æ—çš„ã€ä¸€å¹´ä¸€æ¬¡çš„ç¦é£Ÿï¼Œæ–°çº¦åœ£ç»å´æ²¡æœ‰è¿™æ ·æ˜ç¡®çš„å‘½ä»¤ã€‚ç„¶è€Œï¼Œè€¶ç¨£å´æ•™å¯¼ä»–çš„é—¨å¾’ä»¬å¦‚ä½•ç¦é£Ÿï¼Œè¿™è¡¨æ˜è¯´ç¦é£Ÿçš„æ“ç»ƒæ˜¯è¢«æœŸå¾…çš„ã€‚æˆ‘ä»¬å¯ä»¥å†ä¸€æ¬¡é˜…è¯»é©¬å¤ªç¦éŸ³6:16-18ä¸­è€¶ç¨£çš„æ•™å¯¼ï¼šâ€œä½ ä»¬ç¦é£Ÿçš„æ—¶å€™ï¼Œä¸å¯åƒé‚£å‡å†’ä¸ºå–„çš„äººï¼Œè„¸ä¸Šå¸¦ç€æ„å®¹ï¼›å› ä¸ºä»–ä»¬æŠŠè„¸å¼„å¾—éš¾çœ‹ï¼Œæ•…æ„å«äººçœ‹å‡ºä»–ä»¬æ˜¯ç¦é£Ÿã€‚æˆ‘å®åœ¨å‘Šè¯‰ä½ ä»¬ï¼Œä»–ä»¬å·²ç»å¾—äº†ä»–ä»¬çš„èµèµã€‚ä½ ç¦é£Ÿçš„æ—¶å€™ï¼Œè¦æ¢³å¤´æ´—è„¸ï¼Œä¸è¦å«äººçœ‹å‡ºä½ ç¦é£Ÿæ¥ï¼Œåªå«ä½ æš—ä¸­çš„çˆ¶çœ‹è§ï¼›ä½ çˆ¶åœ¨æš—ä¸­å¯Ÿçœ‹ï¼Œå¿…ç„¶æŠ¥ç­”ä½ ã€‚â€è¿™æ®µç»æ–‡æœ‰ä¸€äº›å€¼å¾—æ³¨æ„çš„åœ°æ–¹ã€‚åŸºç£ç»™æˆ‘ä»¬ä¸€ä¸ªè´Ÿé¢çš„å‘½ä»¤ã€ä¸€ä¸ªæ­£é¢çš„å‘½ä»¤ï¼Œä»¥åŠä¸€ä¸ªåº”è®¸ï¼šè´Ÿé¢çš„å‘½ä»¤æ˜¯ä»€ä¹ˆå‘¢ï¼šä¸è¦åƒå‡å†’ä¼ªå–„çš„äººï¼Œè„¸ä¸Šå¸¦ç€æ„å®¹ã€‚æ­£é¢çš„å‘½ä»¤å‘¢ï¼šè¦æ¢³å¤´æ´—è„¸ï¼Œåªå«ä½ æš—ä¸­çš„çˆ¶çœ‹è§ã€‚è¿˜æœ‰ä¸€ä¸ªåº”è®¸ï¼šä½ çˆ¶åœ¨æš—ä¸­å¯Ÿçœ‹ï¼Œå¿…ç„¶æŠ¥ç­”ä½ ã€‚è¯·æ³¨æ„ï¼Œè€¶ç¨£åœ¨è¿™é‡Œå¹¶æ²¡æœ‰ç»™å‡ºä»»ä½•çš„å…·ä½“å‘½ä»¤ã€‚ä»–æ²¡æœ‰è¯´ä»€ä¹ˆæ—¶å€™åº”è¯¥ç¦é£Ÿï¼Œä¹Ÿæ²¡æœ‰è¯´ç¦é£Ÿåº”è¯¥æœ‰å¤šé•¿ã€‚æ‰€ä»¥ç¦é£Ÿä¸åº”å½“æˆä¸ºä¸€ä¸ªå¾‹æ³•å¼çš„è¦æ±‚ï¼Œå¥½åƒæœ‰ä¸€ä¸ªæ ‡å‡†æ¨¡å¼ä¸€æ ·ï¼Œè€Œæ˜¯ä¸€ä¸ªåŸºç£å¾’çš„ç‰¹æƒå’Œæœºä¼šå¥½å¯»æ±‚ç¥çš„æ©å…¸ã€‚æˆ‘ä»¬ä¸åº”å½“å¿½è§†ç¦é£Ÿï¼Œä½†æ˜¯æˆ‘ä»¬æ€æ ·ç¦é£Ÿè¿™ä»¶äº‹æƒ…ï¼Œåº”å½“è®©åœ£çµæ¥å¸¦é¢†ï¼Œå› ä¸ºåœ£çµå¸®åŠ©æˆ‘ä»¬ç†è§£ç¥çš„è¯è¯­ï¼Œä¹ŸæŠŠçœŸç†çš„åŸåˆ™åœ¨ä¸åŒçš„æƒ…å½¢ä¸‹ï¼Œåº”ç”¨åœ¨æˆ‘ä»¬çš„èº«ä¸Šã€‚\nä¸ºä»€ä¹ˆè¦ç¦é£Ÿï¼Ÿæˆ‘ä»¬éœ€è¦é¦–å…ˆè®¤è¯†åˆ°åŸºç£å¾’çš„ç¦é£Ÿï¼Œæ˜¯æœ‰å±çµæ„ä¹‰å’Œç›®çš„çš„ï¼Œç¦é£Ÿçš„ç›®çš„æ˜¯ä¸ºäº†å»ºç«‹æˆ‘ä»¬ä¸åŸºç£çš„å…³ç³»ã€‚å¦‚æœç¦é£Ÿæ˜¯ä¸ºäº†å…¶ä»–çš„ç›®çš„ï¼Œæ¯”å¦‚å‡è‚¥ã€æ‰‹æœ¯å‰éœ€è¦ç©ºè…¹ã€å¥èº«ã€çœé’±ç­‰ç­‰ï¼Œè¿™éƒ½ä¸æ˜¯æˆ‘ä»¬ä»Šå¤©æ‰€è¯´çš„åŸºç£å¾’çš„ç¦é£Ÿã€‚é‚£ä¹ˆä½œä¸ºåŸºç£å¾’ï¼Œæˆ‘ä»¬ä¸ºä»€ä¹ˆè¦ç¦é£Ÿï¼Œæˆ–è€…è¯´ç¦é£Ÿçš„ç›®çš„æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ\nç¦é£Ÿæ˜¯ä¸ºäº†åŠ å¼ºç¥·å‘Šä»¥æ–¯æ‹‰è®°8:21çš„ç»æ–‡è¿™æ ·è¯´ï¼šâ€œé‚£æ—¶ï¼Œæˆ‘åœ¨äºšå“ˆç“¦æ²³è¾¹å®£å‘Šç¦é£Ÿï¼Œä¸ºè¦åœ¨æˆ‘ä»¬ç¥é¢å‰å…‹è‹¦å·±å¿ƒï¼Œæ±‚ä»–ä½¿æˆ‘ä»¬å’Œå¦‡äººå­©å­ï¼Œå¹¶ä¸€åˆ‡æ‰€æœ‰çš„ï¼Œéƒ½å¾—å¹³å¦çš„é“è·¯ã€‚â€è¯·æ³¨æ„ï¼Œåœ£ç»å¹¶ä¸æ˜¯è¯´ç¦é£Ÿæ˜¯ä¸€ç§å±çµçš„ç»é£Ÿï¼Œä¸ºè¦é€¼è¿«ç¥æŒ‰ç…§æˆ‘ä»¬æ‰€ç¥ˆæ±‚çš„å»åšã€‚ç¦é£Ÿä¸èƒ½æ”¹å˜ç¥æ€ä¹ˆå¬æˆ‘ä»¬ç¥·å‘Šï¼Œç¦é£Ÿåªèƒ½æ”¹å˜æˆ‘ä»¬çš„ç¥·å‘Šã€‚åŸºç£å¾’åœ¨ç¥·å‘Šæ—¶ç¦é£Ÿæ˜¯ç”¨ä¸€ç§ç¥æ‰€æŒ‡å®šçš„æ–¹å¼ï¼Œåœ¨æ²Ÿé€šä»–ä»¬çœŸå¿ƒã€æ€¥åˆ‡çš„ç¥·å‘Šã€‚\nç¦é£Ÿæ˜¯ä¸ºäº†å¯»æ±‚ç¥çš„å¼•å¯¼å£«å¸ˆè®°20:26è®°è¿°äº†è¿™æ ·çš„ä¸€ä»¶äº‹æƒ…ï¼šâ€œä»¥è‰²åˆ—ä¼—äººå°±ä¸Šåˆ°ä¼¯ç‰¹åˆ©ï¼Œååœ¨è€¶å’Œåé¢å‰å“­å·ï¼Œå½“æ—¥ç¦é£Ÿç›´åˆ°æ™šä¸Šï¼›åˆåœ¨è€¶å’Œåé¢å‰çŒ®ç‡”ç¥­å’Œå¹³å®‰ç¥­ã€‚â€ä»–ä»¬ä¸ºäº†è¦å¯»æ±‚ç¥çš„å¼•å¯¼ã€‚åŒæ ·ï¼Œæˆ‘ä»¬è¦æ³¨æ„ï¼Œç¦é£Ÿä¸èƒ½ä¿è¯ç¥ä¸€å®šç»™ä½ æ¸…æ¥šçš„å¸¦é¢†ï¼Œä½†æ˜¯ç¦é£Ÿèƒ½å¤Ÿè®©æˆ‘ä»¬å¯¹ç¥çš„å¸¦é¢†æ›´åŠ æ•æ„Ÿï¼Œå¸®åŠ©æˆ‘ä»¬æŠŠæ³¨æ„åŠ›ä»ä¸–ç•Œè½¬å‘ç¥ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥æ›´åŠ ç”¨å¿ƒåœ°è¯»ç¥çš„è¯è¯­ã€‚åœ¨ä½¿å¾’è¡Œä¼ ä¸­ï¼Œé¢†è¢–ä»¬åœ¨å·®æ´¾ä¿ç½—å’Œå·´æ‹¿å·´ä¹‹å‰ç¦é£Ÿå¯»æ±‚ï¼Œä»–ä»¬æƒ³è¦å¯¹åœ£çµçš„å¼•å¯¼æ›´åŠ çš„æ•æ„Ÿï¼Œæ‰€ä»¥ä»–ä»¬ç¦é£Ÿã€‚\nç¦é£Ÿæ˜¯ä¸ºäº†å¯»æ±‚ä¿æŠ¤å’Œæ‹¯æ•‘å†ä»£å¿—ä¸‹20:2-4ï¼šâ€œæœ‰äººæ¥æŠ¥å‘Šçº¦æ²™æ³•è¯´ï¼šâ€˜ä»æµ·å¤–äºšå…°é‚£è¾¹æœ‰å¤§å†›æ¥æ”»å‡»ä½ ï¼Œå¦‚ä»Šä»–ä»¬åœ¨å“ˆæ´—é€Šâ€§ä»–ç›ï¼Œå°±æ˜¯éšâ€§åŸºåº•ã€‚â€™çº¦æ²™æ³•ä¾¿æƒ§æ€•ï¼Œå®šæ„å¯»æ±‚è€¶å’Œåï¼Œåœ¨çŠ¹å¤§å…¨åœ°å®£å‘Šç¦é£Ÿã€‚äºæ˜¯çŠ¹å¤§äººèšä¼šï¼Œæ±‚è€¶å’Œåå¸®åŠ©ã€‚çŠ¹å¤§å„åŸéƒ½æœ‰äººå‡ºæ¥å¯»æ±‚è€¶å’Œåã€‚â€ä»Šå¤©ï¼Œå½“æˆ‘ä»¬é­é‡æ¥è‡ªå®¶åº­ã€å­¦æ ¡ã€é‚»å±…ã€ç¤¾ä¼šçš„é€¼è¿«æ—¶ï¼Œç¦é£Ÿæ˜¯æˆ‘ä»¬å¯»æ±‚ç¥å¸®åŠ©çš„å·¥å…·ï¼Œä¹Ÿæ„æˆæˆ‘ä»¬çš„ä¿æŠ¤å’Œé˜²çº¿ã€‚\nç¦é£Ÿæ˜¯ä¸ºäº†è¡¨è¾¾æ‚²ä¼¤åœ£ç»ä¸­æœ‰å¾ˆå¤šä¾‹å­æ˜¯ä¸ºç€è½åœ¨ç¥å­æ°‘èº«ä¸Šçš„ç¾éš¾æˆ–ç½ªæ¶ï¼Œè€Œåœ¨ç¥é¢å‰è¡¨ç¤ºæ‚²ä¼¤ã€‚ä¾‹å¦‚æ’’æ¯è€³è®°ä¸‹1:11-12ï¼šâ€œå¤§å«å°±æ’•è£‚è¡£æœï¼Œè·Ÿéšä»–çš„äººä¹Ÿæ˜¯å¦‚æ­¤ï¼Œè€Œä¸”æ‚²å“€å“­å·ï¼Œç¦é£Ÿåˆ°æ™šä¸Šï¼Œæ˜¯å› æ‰«ç½—å’Œä»–å„¿å­çº¦æ‹¿å•ï¼Œå¹¶è€¶å’Œåçš„æ°‘ä»¥è‰²åˆ—å®¶çš„äººï¼Œå€’åœ¨åˆ€ä¸‹ã€‚â€æˆ‘ä»¬ä¹‹å‰åœ¨è®¤ç½ªè¿™ä¸€è®²æåˆ°è®¤ç½ªå¹¶ä¸æ˜¯ç®€å•çš„è¯´ä¸€å †è¯ï¼Œåˆä¹åœ£ç»çš„è®¤ç½ªä¹ŸåŒ…æ‹¬äº†ä¸ºè‡ªå·±çš„ç½ªè€Œæ„Ÿåˆ°å¿§ä¼¤ï¼Œè€Œç¦é£Ÿæ­£æ˜¯åˆä¹åœ£ç»çš„å¿§ä¼¤çš„è¡¨è¾¾æ–¹å¼ä¹‹ä¸€ã€‚ä¸€ä½åŸºç£å¾’ä½œå®¶åœ¨ä»–çš„ä¹¦ä¸­è¿™æ ·è¯´ï¼šæœ‰äº›æ—¶å€™ï¼Œæˆ‘çš„ç½ªä»¤æˆ‘å¦‚æ­¤å¿§ä¼¤ï¼Œä»¥è‡³äºæˆ‘çš„è¯­è¨€å·²ç»ä¸è¶³ä»¥ç”¨æ¥å‘ç¥è¡¨è¾¾æˆ‘çš„æƒ…æ„Ÿã€‚è™½ç„¶ç¦é£Ÿå¹¶ä¸èƒ½è®©æˆ‘æ›´é…å¾—åˆ°ç¥çš„æ€œæ‚¯ï¼Œå´å¯ä»¥ä»¥è¶…è¶Šè¯­è¨€çš„æ–¹å¼ï¼Œè¡¨è¾¾æˆ‘çš„å¿§ä¼¤å’Œè®¤ç½ªã€‚æ‰€ä»¥ç¦é£Ÿå¯ä»¥è¡¨è¾¾æˆ‘ä»¬çš„æ‚²ä¼¤ï¼Œä¸ºç½ªæ‚”æ”¹å’Œå¯¹ç¥çš„ä¿¡é ã€‚\nç¦é£Ÿè¡¨è¾¾æˆ‘ä»¬å¯¹ç¥å·¥ä½œçš„å…³æ³¨ä½†ä»¥ç†ä¹¦9:2-3å†™é“ï¼šâ€œå°±æ˜¯ä»–åœ¨ä½ç¬¬ä¸€å¹´ï¼Œæˆ‘ä½†ä»¥ç†ä»ä¹¦ä¸Šå¾—çŸ¥è€¶å’Œåçš„è¯ä¸´åˆ°å…ˆçŸ¥è€¶åˆ©ç±³ï¼Œè®ºè€¶è·¯æ’’å†·è’å‡‰çš„å¹´æ•°ï¼Œä¸ƒåå¹´ä¸ºæ»¡ã€‚æˆ‘ä¾¿ç¦é£Ÿï¼ŒæŠ«éº»è’™ç°ï¼Œå®šæ„å‘ä¸»ç¥ç¥ˆç¥·æ³æ±‚ã€‚â€æˆ‘ä¸æ˜¯è¯´æˆ‘ä»¬è¦æ•´å¤©ç¦é£Ÿã€ä¸€ç›´ç¦é£Ÿï¼Œæ¥è¡¨è¾¾æˆ‘ä»¬å¯¹ç¥å·¥ä½œçš„å…³æ³¨ã€‚ä½†æ˜¯ç¥æœ‰çš„æ—¶å€™è®©æˆ‘ä»¬å¯¹ç¥‚çš„å·¥ä½œåˆ†å¤–åœ°æ„Ÿåˆ°æœ‰è´Ÿæ‹…ï¼Œåœ£çµä¼šè®©æˆ‘ä»¬æ„Ÿåˆ°æœ‰ç¦é£Ÿçš„å¿…è¦ã€‚æˆ‘ä»¬ç”¨ç¦é£Ÿæ¥è¡¨è¾¾å¯¹ç¥å·¥ä½œçš„å…³æ³¨ã€‚\nç¦é£Ÿæ˜¯è¡¨è¾¾å¯¹ç¥çš„çˆ±å’Œæ•¬æ‹œç¦é£Ÿæ„å‘³ç€è¯´æˆ‘ä»¬çˆ±ç¥è¶…è¿‡çˆ±é£Ÿç‰©ã€‚å½“ä½ ç¦é£Ÿçš„æ—¶å€™ï¼Œä½ æ˜¯åœ¨æ‹’ç»è‡ªå·±å¯¹é£Ÿç‰©çš„æ¸´æ…•æ¥è¿½æ±‚åŸ¹å…»å¯¹ç¥çš„æ¸´æ…•ã€‚å¯»æ±‚ç¥æ¯”å¯»æ±‚åƒå–æ›´åŠ é‡è¦ã€‚å½“ä½ åœ¨ç¦é£Ÿçš„æ—¶å€™ï¼Œå¦‚æœä½ çš„é¥¥é¥¿æ„Ÿä¸Šæ¥äº†ï¼Œä½ å°±è¢«æé†’è¯´ä½ çš„èƒƒä¸æ˜¯ä½ çš„ä¸Šå¸ï¼Œä½ çš„ç¦é£Ÿè£è€€çœŸä¸Šå¸ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬åˆšæ‰ç®€å•åˆ—ä¸¾äº†ä¸€äº›ç¦é£Ÿçš„å¥½ç†ç”±ã€‚ä½†æ˜¯è¯·è®°ä½ï¼Œç¦é£Ÿæ€»æ˜¯æœ‰å±çµç›®çš„çš„â”€â”€ä»¥ç¥ä¸ºä¸­å¿ƒçš„ç›®çš„ï¼Œè€Œä¸æ˜¯è‡ªæˆ‘ä¸­å¿ƒçš„ç›®çš„ã€‚\næ€»ç»“æœ€åï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªæ€»ç»“ã€‚ç¦é£Ÿæµ‹éªŒæˆ‘ä»¬çš„å¿ƒï¼Œç¦é£Ÿæ‹·é—®æˆ‘ä»¬çš„å¿ƒåœ¨å“ªé‡Œã€‚ç¦é£Ÿå¸®åŠ©æˆ‘ä»¬æŠŠç„¦ç‚¹æ”¾åœ¨ç¥å’Œç¥çš„è¯è¯­èº«ä¸Šï¼Œç¦é£Ÿæ•™å¯¼æˆ‘ä»¬ï¼šæˆ‘ä»¬çš„å¿ƒåº”å½“ä¸ç¥åŒåœ¨ï¼Œè€Œä¸æ˜¯ä¸ä¸–ç•ŒåŒåœ¨ã€‚æ‰€ä»¥ï¼Œæˆ‘é¼“åŠ±å¤§å®¶å›å»ä»¥åèŠ±ä¸€ç‚¹æ—¶é—´æ€æƒ³ç¦é£Ÿçš„è¿™äº›ç›®çš„ã€‚äº²çˆ±çš„å¼Ÿå…„å§Šå¦¹ï¼Œäº²çˆ±çš„æœ‹å‹ï¼Œæˆ–è®¸ï¼Œä½ åœ¨æŸä»¶é‡è¦çš„äº‹æƒ…ä¸Šéœ€è¦ç¥çš„å¼•å¯¼å’Œå…‰ç…§ã€‚æˆ–è®¸ï¼Œä½ çš„ç¥·å‘Šæ— æ³•ä¸“æ³¨ï¼Œæ€»æ˜¯è¢«ä¸–ç•Œçš„äº‹æƒ…æ‰“æ‰°ã€‚æˆ–è®¸ï¼Œä½ æ­£åœ¨å’ŒæŸä¸€ä¸ªç½ªäº‰æˆ˜ã€‚æ— è®ºä½ çš„é—®é¢˜æ˜¯ä»€ä¹ˆï¼Œç¦é£Ÿå¯ä»¥æˆä¸ºç¥çš„ä¸€ä¸ªæ©å…¸ç®¡é“ï¼Œå¸®åŠ©ä½ è½¬å‘è¿™ä½è¶³å¤Ÿçš„ç¥ã€‚è®©æˆ‘ä»¬ä¸€èµ·åœ¨ç¦é£Ÿä¸­æ“ç»ƒæˆé•¿å§ï¼\n","slug":"åœ¨ç¦é£Ÿä¸­æ“ç»ƒæˆé•¿","date":"2024-09-30T03:00:36.170Z","categories_index":"åŸºç£","tags_index":"åŸºç£æ•™,å¤©ä¸»,ä¸Šå¸,ç¦é£Ÿ","author_index":"Chuan"}]